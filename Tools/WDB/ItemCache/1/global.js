function $(_1){if(arguments.length>1){var _2=[];for(var i=0,len=arguments.length;i<len;++i){_2.push($(arguments[i]));}return _2;}if(typeof _1=="string"){_1=ge(_1);}return _1;}function $E(e){if(!e){e=event;}e._button=e.which?e.which:e.button;e._target=e.target?e.target:e.srcElement;return e;}function $A(a){var r=[];for(var i=0,len=a.length;i<len;++i){r.push(a[i]);}return r;}Function.prototype.bind=function(){var _8=this,args=$A(arguments),object=args.shift();return function(){return _8.apply(object,args.concat($A(arguments)));};};function strcmp(a,b){if(a==b){return 0;}if(a==null){return -1;}if(b==null){return 1;}return a<b?-1:1;}function trim(_b){return _b.replace(/(^\s*|\s*$)/g,"");}function rtrim(z,y){var a=z.length;while(--a>0&&z.charAt(a)==y){}z=z.substring(0,a+1);if(z==y){z="";}return z;}function sprintf(z){for(var i=1,len=arguments.length;i<len;++i){z=z.replace("$"+i,arguments[i]);}return z;}function str_replace(z,a,b){while(z.indexOf(a)!=-1){z=z.replace(a,b);}return z;}function urlencode(z){z=encodeURIComponent(z);z=str_replace(z,"+","%2B");return z;}function number_format(z){z=""+parseInt(z);if(z.length<=3){return z;}return number_format(z.substr(0,z.length-3))+","+z.substr(z.length-3);}function in_array(a,r,f,s){if(a==null){return -1;}if(f){return in_arrayf(a,r,f);}for(var i=s||0,len=a.length;i<len;++i){if(a[i]==r){return i;}}return -1;}function in_arrayf(a,r,f,s){for(var i=s||0,len=a.length;i<len;++i){if(f(a[i])==r){return i;}}return -1;}function array_walk(a,f,ud){var res;for(var i=0,len=a.length;i<len;++i){res=f(a[i],ud,a,i);if(res!=null){a[i]=res;}}}function array_apply(a,f,ud){var res;for(var i=0,len=a.length;i<len;++i){f(a[i],ud,a,i);}}function ge(z){return document.getElementById(z);}function gE(z,y){return z.getElementsByTagName(y);}function ce(z,p){var r=document.createElement(z);if(p){cOr(r,p);}return r;}function de(z){z.parentNode.removeChild(z);}function ae(z,y){return z.appendChild(y);}function ct(z){return document.createTextNode(z);}function rf(){return false;}function tb(){this.blur();}function ac(z){var a=0,b=0;while(z){a+=z.offsetLeft;b+=z.offsetTop;z=z.offsetParent;}return [a,b];}function aE(z,y,x){if(Browser.ie){z.attachEvent("on"+y,x);}else{z.addEventListener(y,x,false);}}function dE(z,y,x){if(Browser.ie){z.detachEvent("on"+y,x);}else{z.removeEventListener(y,x,false);}}function sp(z){if(!z){z=event;}if(Browser.ie){z.cancelBubble=true;}else{z.stopPropagation();}}function sc(z,y,x,w,v){var a=new Date();var b=z+"="+escape(x)+"; ";a.setDate(a.getDate()+y);b+="expires="+a.toUTCString()+"; ";if(w){b+="path="+w+"; ";}if(v){b+="domain="+v+"; ";}document.cookie=b;}function dc(z){sc(z,-1);}function gc(z){var b,c;if(!z){var a=[];c=document.cookie.split("; ");for(var i=0;i<c.length;++i){b=c[i].split("=");a[b[0]]=unescape(b[1]);}return a;}else{b=document.cookie.indexOf(z+"=");if(b!=-1){if(b==0||document.cookie.substring(b-2,b)=="; "){b+=z.length+1;c=document.cookie.indexOf("; ",b);if(c==-1){c=document.cookie.length;}return unescape(document.cookie.substring(b,c));}}}return null;}function ns(n){n.onmousedown=n.onselectstart=n.ondragstart=rf;if(Browser.ie){n.onfocus=tb;}}function cO(d,s){for(var p in s){d[p]=s[p];}}function cOr(d,s){for(var p in s){if(typeof s[p]=="object"){if(!d[p]){d[p]={};}cOr(d[p],s[p]);}else{d[p]=s[p];}}}var Browser={ie:!!(window.attachEvent&&!window.opera),opera:!!window.opera,safari:navigator.userAgent.indexOf("Safari")!=-1,gecko:navigator.userAgent.indexOf("Gecko")!=-1&&navigator.userAgent.indexOf("KHTML")==-1};Browser.ie7=Browser.ie&&navigator.userAgent.indexOf("MSIE 7.0")!=-1;Browser.ie6=Browser.ie&&navigator.userAgent.indexOf("MSIE 6.0")!=-1&&!Browser.ie7;navigator.userAgent.match(/Gecko\/([0-9]+)/);Browser.geckoVersion=parseInt(RegExp.$1)|0;function g_getWindowSize(){var _50=0,height=0;if(typeof window.innerWidth=="number"){_50=window.innerWidth;height=window.innerHeight;}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){_50=document.documentElement.clientWidth;height=document.documentElement.clientHeight;}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){_50=document.body.clientWidth;height=document.body.clientHeight;}}}return {w:_50,h:height};}function g_getScroll(){var x=0,y=0;if(typeof (window.pageYOffset)=="number"){x=window.pageXOffset;y=window.pageYOffset;}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){x=document.body.scrollLeft;y=document.body.scrollTop;}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){x=document.documentElement.scrollLeft;y=document.documentElement.scrollTop;}}}return {x:x,y:y};}function g_getCursorPos(e){var x,y;if(window.innerHeight){x=e.pageX;y=e.pageY;}else{var _54=g_getScroll();x=e.clientX+_54.x;y=e.clientY+_54.y;}return {x:x,y:y};}function g_scrollTo(n,p){var _,windowSize=g_getWindowSize(),scroll=g_getScroll(),bcw=windowSize.w,bch=windowSize.h,bsl=scroll.x,bst=scroll.y;n=$(n);if(p==null){p=[];}else{if(typeof p=="number"){p=[p];}}_=p.length;if(_==0){p[0]=p[1]=p[2]=p[3]=0;}else{if(_==1){p[1]=p[2]=p[3]=p[0];}else{if(_==2){p[2]=p[0];p[3]=p[1];}else{if(_==3){p[3]=p[1];}}}}_=ac(n);var nl=_[0]-p[3];var nt=_[1]-p[0];var nr=_[0]+n.offsetWidth+p[1];var nb=_[1]+n.offsetHeight+p[2];if(nr-nl>bcw||nl<bsl){bsl=nl;}else{if(nr-bcw>bsl){bsl=nr-bcw;}}if(nb-nt>bch||nt<bst){bst=nt;}else{if(nb-bch>bst){bst=nb-bch;}}scrollTo(bsl,bst);}function g_setTextNodes(n,_5d){if(n.nodeType==3){n.nodeValue=_5d;}else{for(var i=0;i<n.childNodes.length;++i){g_setTextNodes(n.childNodes[i],_5d);}}}function g_getTextContent(el){var txt="";for(var i=0;i<el.childNodes.length;++i){if(el.childNodes[i].nodeValue){txt+=el.childNodes[i].nodeValue;}else{if(el.childNodes[i].nodeName=="BR"){if(Browser.ie){txt+="\r";}else{txt+="\n";}}}txt+=g_getTextContent(el.childNodes[i]);}return txt;}function g_setSelectedLink(n,_63){if(!g_setSelectedLink.groups){g_setSelectedLink.groups={};}var _=g_setSelectedLink.groups;if(_[_63]){_[_63].className="";}n.className="selected";_[_63]=n;}function g_toggleDisplay(el){if(el.style.display=="none"){el.style.display="";return true;}else{el.style.display="none";return false;}}function g_initHeader(_66){var dl=ce("dl");for(var i=0,len=mn_path.length;i<len;++i){var dt=ce("dt");var a=ce("a");var ins=ce("ins");var _6c=ce("big");var sp=ce("span");if(mn_path[i][0]!=_66){a.menu=mn_path[i][3];a.onmouseover=Menu.show;a.onmouseout=Menu.hide;}if(mn_path[i][2]){a.href=mn_path[i][2];}else{a.href="javascript:;";ns(a);a.style.cursor="default";}if(_66!=null&&mn_path[i][0]==_66){a.className="selected";}ae(_6c,ct(mn_path[i][1].charAt(0)));ae(ins,_6c);ae(ins,ct(mn_path[i][1].substr(1)));ae(a,ins);ae(a,sp);ae(dt,a);ae(dl,dt);}ae(ge("ptewhjkst46"),dl);var _6e=ge("kbl34h6b43");if(_66!=null&&_66>=0&&_66<mn_path.length){switch(_66){case 0:Menu.addButtons(_6e,Menu.explode(mn_database));break;case 1:Menu.addButtons(_6e,mn_tools);break;case 2:Menu.addButtons(_6e,Menu.explode(mn_more));break;case 3:Menu.addButtons(_6e,mn_forums);break;}}else{ae(_6e,ct(String.fromCharCode(160)));}var _6f=ge("oh2345v5ks");var _70=_6f.previousSibling;var _71=_6f.parentNode;ns(_70);_70.onclick=function(){this.parentNode.onsubmit();};if(_6f.value==""){_6f.className="search-database";}_6f.onmousemove=function(){if(trim(this.value)!=""){_6f.className="";}};_6f.onfocus=function(){_6f.className="";};_6f.onblur=function(){if(trim(this.value)==""){_6f.className="search-database";}};_71.onsubmit=function(){var _72=this.elements[0].value;if(trim(_72)==""){return false;}this.submit();};}function g_initPath(z,_74){var it=mn_path,lastIt=null,lastSp=null,error=0,targetNode=ge("main-precontents"),container=ce("div");container.className="path";if(_74!=null){var d=ce("div");d.className="path-right";var a=ce("a");a.href="javascript:;";ns(a);a.onclick=fi_Toggle;ae(a,ct(_74==0?"Create a filter":"Hide filter options"));ae(d,a);ae(targetNode,d);}for(var i=0;i<z.length;++i){var a,sp,found=0;for(var j=0;j<it.length;++j){if(it[j][0]==z[i]){found=1;it=it[j];it.checked=1;break;}}if(!found){error=1;break;}a=ce("a");sp=ce("span");if(it[2]){a.href=it[2];}else{a.href="javascript:;";ns(a);a.style.textDecoration="none";a.style.color="white";a.style.cursor="default";}if(i<z.length-1&&it[3]){sp.className="menuarrow";}ae(a,ct(it[4]==null?it[1]:it[4]));if(i==0){a.menu=mn_path;}else{a.menu=lastIt[3];}a.onmouseover=Menu.show;a.onmouseout=Menu.hide;ae(sp,a);ae(container,sp);lastSp=sp;lastIt=it;it=it[3];if(!it){error=1;break;}}if(error&&lastSp){lastSp.className="";}var d=ce("div");d.className="clear";ae(container,d);ae(targetNode,container);g_initPath.lastIt=lastIt;}function g_formatTimeElapsed(_7c){function bibouille(_7d,_7e,_7f){if(_7f&&LANG.timeUnitsAb[_7e]==""){_7f=0;}if(_7f){return _7d+" "+LANG.timeUnitsAb[_7e];}else{return _7d+" "+(_7d==1?LANG.timeUnitsSg[_7e]:LANG.timeUnitsPl[_7e]);}}var _80=[31557600,2629800,604800,86400,3600,60,1];var _81=[1,3,3,-1,5,-1,-1];_7c=Math.max(_7c,1);for(var i=3,len=_80.length;i<len;++i){if(_7c>=_80[i]){var i1=i;var v1=Math.floor(_7c/_80[i1]);if(_81[i1]!=-1){var i2=_81[i1];_7c%=_80[i1];v2=Math.floor(_7c/_80[i2]);if(v2>0){return bibouille(v1,i1,1)+" "+bibouille(v2,i2,1);}}return bibouille(v1,i1,0);}}return "(n/a)";}function g_formatDateSimple(d,_87){function __twoDigitsAsNeeded(n){return (n<10?"0"+n:n);}var b="",day=d.getDate(),month=d.getMonth()+1,year=d.getFullYear();b+=__twoDigitsAsNeeded(month)+"/"+__twoDigitsAsNeeded(day)+"/"+year;if(_87){var _8a=d.getHours()+1,minutes=d.getMinutes()+1;b+=" at "+__twoDigitsAsNeeded(_8a)+":"+__twoDigitsAsNeeded(minutes);}return b;}function g_createGlow(txt,cn){var s=ce("span");for(var i=-1;i<=1;++i){for(var j=-1;j<=1;++j){var d=ce("div");d.style.position="absolute";d.style.whiteSpace="nowrap";d.style.left=i+"px";d.style.top=j+"px";if(i==0&&j==0){d.style.zIndex=4;}else{d.style.color="black";d.style.zIndex=2;}ae(d,ct(txt));ae(s,d);}}s.style.position="relative";s.className="glow"+(cn!=null?" "+cn:"");var ph=ce("span");ph.style.visibility="hidden";ae(ph,ct(txt));ae(s,ph);return s;}function g_appendReputation(d,_93,_94,_95){d=$(d);var a=ce("a");a.href="javascript:;";a.onmousedown=rf;a.className="reputation";var div=ce("div");div.className="reputation-text";var del=ce("del");ae(del,ct(g_reputation_standings[_93]));ae(div,del);var ins=ce("ins");ae(ins,ct(_95));ae(div,ins);ae(a,div);div=ce("div");div.className="reputation-bar"+_93;if(_94<=0||_94>100){div.style.visibility="hidden";}div.style.width=_94+"%";ae(div,ct(String.fromCharCode(160)));ae(a,div);ae(d,a);}function g_createCaptcha(){var img=ce("img");img.src="/php/captcha.php?"+Math.random();img.width=150;img.height=40;img.vspace=8;return img;}function g_revealCaptcha(){if((g_user.permissions&1)==0){var _=ge("klrbetkjerbt46");if(gE(_,"img").length==0){var img=g_createCaptcha();ae(_,img);_.parentNode.style.display="";}}}function g_addSubcatMenu(){var _;if(g_initPath.lastIt&&g_initPath.lastIt[3]){_=ge("subcat");_.menu=g_initPath.lastIt[3];_.menuappend="&filter";_.onmouseover=Menu.show;_.onmouseout=Menu.hide;}}function g_convertRatingToPercent(_9e,_9f,_a0){var _a1={12:1.5,13:12,14:15,15:5,16:10,17:10,18:8,19:14,20:14,21:14,22:0,23:0,24:0,25:0,26:0,27:0,28:10,29:10,30:10,31:10,32:14,33:0,34:0,35:25,36:10,37:2.5};if(_9e<10){_9e=10;}else{if(_9e>70){_9e=70;}}if(_a0<0){_a0=0;}var _a2;if(_a1[_9f]==null){_a2=0;}else{f=_a1[_9f];if(_9e>=1&&_9e<=59){_a2=_a0/f/((1/52)*_9e-(8/52));}else{if(_9e>=60&&_9e<=70){_a2=_a0/f*((-3/82)*_9e+(131/41));}else{_a2=0;}}}var _a3=(Math.round(_a2*100)/100);if(_9f!=12&&_9f!=37){_a3+="%";}return _a3;}function g_setRatingLevel(_a4,_a5,_a6,_a7){var n=prompt("Please enter the level used in the calculation (1 - 70):",_a5);if(n!=null){n|=0;if(n!=_a5&&n>=1&&n<=70){_a5=n;var foo=String.fromCharCode(160);_a4.firstChild.nodeValue=g_convertRatingToPercent(_a5,_a6,_a7)+foo+"@"+foo+"L"+_a5;_a4.onclick=g_setRatingLevel.bind(0,_a4,_a5,_a6,_a7);}}}function g_view3dModel(_aa,_ab,_ac){var w=window.open("/?modelviewer="+_ac+"&"+g_types[_aa]+"="+_ab,"wh"+parseInt(Math.random()*1000),"width=810,height=605,location=0,toolbar=0,resizable=0,status=0,menubar=0,scrollbars=0,directories=0");}function g_getMoneyHtml(_ae){var ns=0,html="";if(_ae>=10000){ns=1;html+="<span class=\"moneygold\">"+Math.floor(_ae/10000)+"</span>";_ae%=10000;}if(_ae>=100){if(ns){html+=" ";}else{ns=1;}html+="<span class=\"moneysilver\">"+Math.floor(_ae/100)+"</span>";_ae%=100;}if(_ae>=1){if(ns){html+=" ";}else{ns=1;}html+="<span class=\"moneycopper\">"+_ae+"</span>";}return html;}function g_getPatchVersion(_b0){var _=g_getPatchVersion;var l=0,u=_.T.length,m;while(u>l){m=parseInt((u+l)/2);if(_b0<=_.T[m]){u=m-1;}else{l=m+1;}}if(m<_.T.length-1&&_b0>=_.T[m+1]){++m;}else{if(m>0&&_b0<_.T[m]){--m;}}return _.V[m];}g_getPatchVersion.V=["1.12.0","1.12.1","1.12.2","2.0.1","2.0.3","2.0.4","2.0.5","2.0.6","2.0.7","2.0.8","2.0.10","2.0.12","2.1.0","2.1.1","2.1.2","2.1.3","2.2.0","2.2.2","2.2.3","2.3.0","2.3.2","2.3.3"];g_getPatchVersion.T=[1153540800000,1159243200000,1160712000000,1165294800000,1168318800000,1168578000000,1168750800000,1169528400000,1171342800000,1171602000000,1173157200000,1175572800000,1179806400000,1181016000000,1182225600000,1184040000000,1190692800000,1191297600000,1191902400000,1194930000000,1199768400000,1200978000000];function g_expandSite(){de(ge("sidebar"));de(ge("header-ad"));ge("wrapper").className="noads";var _=ge("contribute-ad");if(_){de(_);}}function g_insertTag(_b4,_b5,_b6,_b7){var n=$(_b4);n.focus();if(n.selectionStart!=null){var s=n.selectionStart,e=n.selectionEnd,sL=n.scrollLeft,sT=n.scrollTop;var _ba=n.value.substring(s,e);if(typeof _b7=="function"){_ba=_b7(_ba);}n.value=n.value.substr(0,s)+_b5+_ba+_b6+n.value.substr(e);n.selectionStart=n.selectionEnd=e+_b5.length;n.scrollLeft=sL;n.scrollTop=sT;}else{if(document.selection&&document.selection.createRange){var _bb=document.selection.createRange();if(_bb.parentElement()!=n){return;}var _bc=_bb.text;if(typeof _b7=="function"){_bc=_b7(_bc);}_bb.text=_b5+_bc+_b6;}}if(n.onkeyup){n.onkeyup();}}function co_addYourComment(){tabsContribute.focus(0);var ta=gE(document.forms["addcomment"],"textarea")[0];ta.focus();}function co_cancelReply(){var ta=gE(document.forms["addcomment"],"textarea")[0];ta.value="";ge("gjkdlfgkjh436").style.display="none";}function co_validateForm(f){var ta=gE(f,"textarea")[0];if(Listview.funcBox.coValidate(ta)){if(g_user.permissions&1){return true;}if(f.elements["captcha"].value.length==5){return true;}else{alert("You did not enter the code.");f.elements["captcha"].focus();}}return false;}function ss_submitAScreenshot(){tabsContribute.focus(1);}function ss_validateForm(f){if(!f.elements["screenshotfile"].value.length){alert("Please select the screenshot to upload.");return false;}return true;}function ss_appendSticky(){var _=ge("infobox-sticky");var _c3=g_pageInfo.type;var _c4=g_pageInfo.typeId;var _c5=0;for(var i=0,len=lv_screenshots.length;i<len;++i){var _c7=lv_screenshots[i];if(_c7.sticky){_c5=1;var a=ce("a");a.href="/?screenshot=view&"+_c3+"."+_c4+"#"+_c7.id;a.style.border="0";var img=ce("img");img.src="/images/screenshots/thumb/"+_c7.id+".jpg";img.width=_c7.rWidth;img.height=_c7.rHeight;img.style.border="3px solid #404040";ae(a,img);ae(_,a);var d=ce("div");var s=ce("small");a=ce("a");if(g_user.id>0){a.href="javascript:;";a.onclick=ss_submitAScreenshot;a.onmousedown=rf;}else{a.href="/?account=signin";}ae(a,ct("Submit one"));ae(s,a);ae(s,ct(" "+String.fromCharCode(160)));var b=ce("b");ae(b,ct("|"));ae(s,b);ae(s,ct(String.fromCharCode(160)+" "));a=ce("a");a.href="javascript:;";a.onclick=function(){tabsRelated.focus(-1);return false;};a.onmousedown=rf;ae(a,ct("Show all ("+len+")"));ae(s,a);ae(d,s);ae(_,d);break;}}if(!_c5){ae(_,ct("None yet "+String.fromCharCode(8211)+" "));var a=ce("a");if(g_user.id>0){a.href="javascript:;";a.onclick=ss_submitAScreenshot;a.onmousedown=rf;}else{a.href="/?account=signin";}ae(a,ct("Submit one"));ae(_,a);ae(_,ct("!"));}}function Ajax(url,opt){if(!url){return;}var _;try{_=new XMLHttpRequest();}catch(e){try{_=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{_=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){if(window.createRequest){_=window.createRequest();}else{alert("Please upgrade to a modern browser (such as Firefox) that supports 'Ajax' requests.");return;}}}}this.request=_;cO(this,opt);this.method=this.method||(this.params&&"POST")||"GET";_.open(this.method,url,this.async==null?true:this.async);_.onreadystatechange=Ajax.onReadyStateChange.bind(this);if(this.method.toUpperCase()=="POST"){_.setRequestHeader("Content-Type",(this.contentType||"application/x-www-form-urlencoded")+"; charset="+(this.encoding||"UTF-8"));}_.send(this.params);}Ajax.onReadyStateChange=function(){if(this.request.readyState==4){if(this.request.status==0||(this.request.status>=200&&this.request.status<300)){this.onSuccess!=null&&this.onSuccess(this.request,this);}else{this.onFailure!=null&&this.onFailure(this.request,this);}if(this.onComplete!=null){this.onComplete(this.request,this);}}};function g_ajaxIshRequest(url){var _d2=document.getElementsByTagName("head")[0];ae(_d2,ce("script",{type:"text/javascript",src:url}));}var Menu={iframes:[],divs:[],selection:[],show:function(){try{clearTimeout(Menu.timer);if(Menu.currentLink){Menu._show(this);}else{this.className="open";Menu.timer=setTimeout(Menu._show.bind(0,this),100);}}catch(e){}},_show:function(_d3){if(Menu.currentLink!=_d3){var c=ac(_d3);Menu._hide();Menu.selection=[-1];Menu.currentLink=_d3;Menu.showDepth(0,_d3.menu,c[0],c[1]+_d3.offsetHeight+1,_d3.offsetHeight+8,0,c[1]);_d3.className="open";}else{Menu.truncate(0);Menu.clean(0);}},showAtCursor:function(e){e=$E(e);clearTimeout(Menu.timer);Menu._hide();Menu.selection=[-1];Menu.currentLink=null;var pos=g_getCursorPos(e);Menu.showDepth(0,this.menu,pos.x,pos.y,0,0,0);},hide:function(){try{clearTimeout(Menu.timer);if(Menu.currentLink){Menu.timer=setTimeout(Menu._hide,333);}else{this.className="";}}catch(e){}},_hide:function(){for(var i=0,len=Menu.selection.length;i<len;++i){Menu.divs[i].style.display="none";Menu.divs[i].style.visibility="hidden";if(Browser.ie6){Menu.iframes[i].style.display="none";}}Menu.selection=[];if(Menu.currentLink){Menu.currentLink.className="";}Menu.currentLink=null;},sepOver:function(){var d=this.d;var _d9=d.i;Menu.truncate(_d9);Menu.clean(_d9);Menu.selection[_d9]=-1;},elemOver:function(){var d=this.d;var _db=d.i;var i=this.i;var k=this.k;var _de=this.firstChild.className=="menusub";Menu.truncate(_db+_de);if(_de&&i!=Menu.selection[_db]){var c=ac(this);Menu.selection[_db+1]=-1;Menu.showDepth(_db+1,d.menuArray[i][3],c[0],c[1]-2,this.offsetHeight,this.offsetWidth-3,0);}Menu.clean(_db);Menu.selection[_db]=k;if(this.className.length){this.className+=" open";}else{this.className="open";}},getIframe:function(i){var d;if(Menu.iframes[i]==null){d=ce("iframe");d.src="javascript:0;";d.frameBorder=0;ae(ge("layers"),d);Menu.iframes[i]=d;}else{d=Menu.iframes[i];}return d;},getDiv:function(i,_e3){var d;if(Menu.divs[i]==null){d=ce("div");d.className="menu";ae(ge("layers"),d);Menu.divs[i]=d;}else{d=Menu.divs[i];}d.i=i;d.menuArray=_e3;return d;},showDepth:function(i,_e6,x,y,h,w,_eb){var _,d=Menu.getDiv(i,_e6);while(d.firstChild){de(d.firstChild);}var _ed=ce("table"),tbody=ce("tbody"),tr=ce("tr"),td=ce("td"),div=ce("div"),div2=ce("div");var m=999;var _ef=g_getWindowSize(),scroll=g_getScroll(),bcw=_ef.w,bch=_ef.h,bsl=scroll.x,bst=scroll.y;if(h>0){if((25+1)*_e6.length>bch-25-_eb){for(var j=2;j<4;++j){if(h/j*_e6.length+30<bch-_eb){break;}}m=Math.floor(_e6.length/j);}}var row=0;var k=0;for(var j in _e6){if(_e6[j][0]==null){var sp=ce("span");sp.className="separator";ns(sp);ae(sp,ct(_e6[j][1]));sp.d=d;sp.onmouseover=Menu.sepOver;ae(div2,sp);}else{var a=ce("a");a.d=d;a.k=k++;a.i=j;if(_e6[j][2]){if(Menu.currentLink&&Menu.currentLink.menuappend){if(_e6[j][2].indexOf(Menu.currentLink.menuappend)==-1){a.href=_e6[j][2]+Menu.currentLink.menuappend;}else{a.href=_e6[j][2];}}else{if(typeof _e6[j][2]=="function"){a.href="javascript:;";a.onclick=_e6[j][2];ns(a);}else{a.href=_e6[j][2];}}}else{a.href="javascript:;";a.style.cursor="default";ns(a);}a.onmouseover=Menu.elemOver;var s=ce("span"),s2=ce("span");if(_e6[j][3]!=null){s.className="menusub";}if(_e6[j].checked){s2.className="menucheck";}ae(s2,ct(_e6[j][1]));ae(s,s2);ae(a,s);ae(div2,a);}if(row++==m){div.onmouseover=Menu.divOver;div.onmouseout=Menu.divOut;ae(div,div2);if(!Browser.ie6){var p=ce("p");ae(p,ce("em"));ae(p,ce("var"));ae(p,ce("strong"));ae(p,div);ae(td,p);}else{ae(td,div);}ae(tr,td);td=ce("td");p=ce("p");div=ce("div");div2=ce("div");row=0;}}div.onmouseover=Menu.divOver;div.onmouseout=Menu.divOut;ae(div,div2);if(!Browser.ie6){if(m!=999){var p=ce("p");ae(p,ce("em"));ae(p,ce("var"));ae(p,ce("strong"));ae(p,div);ae(td,p);}else{ae(d,ce("em"));ae(d,ce("var"));ae(d,ce("strong"));ae(td,div);}}else{ae(td,div);}ae(tr,td);ae(tbody,tr);ae(_ed,tbody);ae(d,_ed);d.style.left=d.style.top="-2323px";d.style.display="";var tow=_ed.offsetWidth,toh=_ed.offsetHeight;if(x+w+tow+15>bcw){x=Math.max(0,x-tow-3);}else{x+=w;}if(y+toh>bch+bst){y=Math.max(bst+5,bch+bst-toh-10);}d.style.left=x+"px";d.style.top=y+"px";if(Browser.ie6){_=Menu.getIframe(i);_.style.left=x+"px";_.style.top=y+"px";_.style.width=tow+"px";_.style.height=toh+"px";_.style.display="";_.style.visibility="visible";}d.style.visibility="visible";if(Browser.opera){d.style.display="none";d.style.display="";}},divOver:function(){clearTimeout(Menu.timer);},divOut:function(){clearTimeout(Menu.timer);Menu.timer=setTimeout(Menu._hide,333);},truncate:function(a){var _;while(Menu.selection.length-1>a){_=Menu.selection.length-1;Menu.divs[_].style.display="none";Menu.divs[_].style.visibility="hidden";if(Browser.ie6){Menu.iframes[_].style.display="none";}Menu.selection.pop();}},clean:function(a){for(var j=a;j<Menu.selection.length;++j){if(Menu.selection[j]!=-1){d=gE(Menu.divs[j],"a")[Menu.selection[j]];if(d.className.indexOf("sub")!=-1){d.className="sub";}else{d.className="";}Menu.selection[j]=-1;}}},append:function(a,t){a[2]+=t;if(a[3]!=null){Menu._append(a[3],t);}},_append:function(a,t){var p,foo=0;for(var i=0;i<a.length;++i){if(a[i][2].indexOf("sl=")!=-1){t=t.replace(/sl=([0-9]:?)+/,"");foo=1;}else{if(a[i][2].indexOf("cl=")!=-1){t=t.replace(/cl=[0-9]+/,"");foo=1;}}if(foo){t=t.replace("&filter=",";");t=rtrim(t,";");t=t.replace(";;",";");}a[i][2]+=t;if(a[i][3]){Menu._append(a[i][3],t);}}},fixUrls:function(menu,url,_106){for(var i=0,len=menu.length;i<len;++i){if(menu[i][2]==null){menu[i][2]=url+menu[i][0];}if(menu[i][3]){if(_106){Menu.fixUrls(menu[i][3],url,_106);}else{Menu.fixUrls(menu[i][3],url+menu[i][0]+".",_106);}}}},addButtons:function(d,menu){for(var i=0,len=menu.length;i<len;++i){if(menu[i][0]==null){continue;}var a=ce("a"),span=ce("span");if(menu[i][2]){a.href=menu[i][2];}else{a.href="javascript:;";a.style.cursor="default";a.style.textDecoration="none";ns(a);}if(menu[i][3]!=null){span.className="menuarrowd";a.menu=menu[i][3];a.onmouseover=Menu.show;a.onmouseout=Menu.hide;}ae(span,ct(menu[i][1]));ae(a,span);ae(d,a);}},explode:function(menu){var _10d=[],group=null,groupedMenu;for(var i=0,len=menu.length;i<len;++i){if(menu[i][0]!=null){if(group!=null){groupedMenu.push(menu[i]);}else{_10d.push(menu[i]);}}if(group!=null&&(menu[i][0]==null||i==len-1)){_10d.push([0,group[1],,groupedMenu]);}if(menu[i][0]==null){group=menu[i];groupedMenu=[];}}return _10d;}};function Tabs(opt){cO(this,opt);if(this.parent){this.parent=$(this.parent);}else{return;}this.oldMode=(Browser.geckoVersion>20000000&&Browser.geckoVersion<=20060414);this.selectedTab=-1;this.uls=[];this.tabs=[];this.nShows=0;if(this.poundable==null){this.poundable=1;}this.poundedTab=null;if(this.onLoad==null){this.onLoad=Tabs.onLoad.bind(this);}if(this.onShow==null){this.onShow=Tabs.onShow.bind(this);}if(this.onHide){this.onHide=this.onHide.bind(this);}}Tabs.prototype={add:function(_110,opt){var _,index=this.tabs.length;_={caption:_110,index:index,owner:this};cO(_,opt);this.tabs.push(_);return index;},focus:function(_113){if(_113<0){_113=this.tabs.length+_113;}this.forceScroll=1;gE(this.uls[this.oldMode?0:2],"a")[_113].onclick({},true);this.forceScroll=null;},show:function(_114,_115){var _;if(isNaN(_114)||_114<0){_114=0;}else{if(_114>=this.tabs.length){_114=this.tabs.length-1;}}if(_115==null&&_114==this.selectedTab){return;}if(this.selectedTab!=-1){_=this.tabs[this.selectedTab];if(this.onHide&&!this.onHide(_)){return;}if(_.onHide&&!_.onHide()){return;}}++this.nShows;var maxi=this.oldMode?0:3;for(var i=0;i<=maxi;++i){_=gE(this.uls[i],"a");if(this.selectedTab!=-1){_[this.selectedTab].className="";}_[_114].className="selected";}_=this.tabs[_114];if(_.onLoad){_.onLoad();_.onLoad=null;}this.onShow(this.tabs[_114],this.tabs[this.selectedTab]);if(_.onShow){_.onShow(this.tabs[this.selectedTab]);}this.selectedTab=_114;},flush:function(_119){if(this.oldMode){var ul,li,div,a;ul=ce("ul");ul.className="old-tabs";for(var i=0;i<this.tabs.length;++i){var tab=this.tabs[i];li=ce("li");div=ce("div");a=ce("a");if(this.poundable){a.href="#"+tab.id;}else{a.href="javascript:;";}ns(a);a.onclick=Tabs.onClick.bind(tab,a);ae(a,ct(tab.caption));ae(li,div);ae(li,a);ae(ul,li);}this.uls[0]=ul;ae(this.parent,ul);}else{var _,l,a,d,d2;var _11e=ce("div");_11e.className="tabs-container";d=ce("div");d.style.visibility="hidden";this.uls[0]=ce("ul");this.uls[0].className="tabs";ae(d,this.uls[0]);ae(_11e,d);d=ce("div");d.className="tabs-levels";for(var i=1;i<=3;++i){d2=ce("div");d2.className="tabs-level";this.uls[i]=ce("ul");this.uls[i].className="tabs";this.uls[i].style.top=(-30*(3-i))+"px";ae(d2,this.uls[i]);ae(d,d2);}ae(_11e,d);for(var i=0;i<this.tabs.length;++i){var tab=this.tabs[i];for(var j=0;j<=3;++j){l=ce("li");a=ce("a");b=ce("b");if(this.poundable){a.href="#"+tab.id;}else{a.href="javascript:;";}if(j>0){ns(a);a.onclick=Tabs.onClick.bind(tab,a);}if(!Browser.ie6){d=ce("div");ae(d,ct(tab.caption));ae(a,d);}ae(b,ct(tab.caption));ae(a,b);ae(l,a);ae(this.uls[j],l);}}ae(this.parent,_11e);}if(this.onLoad){_=this.onLoad();if(_!=null){this.poundedTab=_119=_;}}this.show(_119);},setTabName:function(_123,name){var maxi=this.oldMode?0:3;for(var i=0;i<=maxi;++i){_=gE(this.uls[i],"a");g_setTextNodes(_[_123],name);}},setTabPound:function(_127,_128){if(!this.poundable){return;}var maxi=this.oldMode?0:3;for(var i=0;i<=maxi;++i){_=gE(this.uls[i],"a");_[_127].href="#"+this.tabs[_127].id+":"+_128;}}};Tabs.onClick=function(a,e,_12d){if(_12d==null&&this.index==this.owner.selectedTab){return;}e=$E(e);if(e.shiftKey||e.ctrlKey){return;}this.owner.show(this.index,_12d);if(this.owner.poundable){var _=a.href.indexOf("#");_!=-1&&location.replace(a.href.substr(_));}return false;};Tabs.onLoad=function(){if(!this.poundable||!location.hash.length){return;}var _=location.hash.substr(1).split(":")[0];if(_){return in_array(this.tabs,_,function(x){return x.id;});}};Tabs.onShow=function(_131,_132){var _;if(_132){ge("tab-"+_132.id).style.display="none";}_=ge("tab-"+_131.id);_.style.display="";if((this.nShows==1&&this.poundedTab!=null&&this.poundedTab>=0)||this.forceScroll){var el,padd;if(this.__st){el=this.__st;padd=15;}else{el=_;padd=this.parent.offsetHeight+15;}if(Browser.ie){setTimeout(g_scrollTo.bind(this,el,padd),1);}else{g_scrollTo(el,padd);}}};var Icon={sizes:["small","medium","large"],create:function(_135,size,_137,link,num,qty){var _;var icon=ce("div"),tile=ce("div");icon.className="icon"+Icon.sizes[size];if(_135!=null){icon.style.backgroundImage="url(http://static.wowhead.com/images/icons/"+Icon.sizes[size]+"/"+_135.toLowerCase()+".jpg)";}tile.className="tile";if(_137||link){var a=ce("a");if(_137&&_137.length){a.tooltip=_137;a.onmouseover=Icon.over;a.onmouseout=Icon.out;}if(link){a.href=link;}else{a.href="javascript:;";ns(a);}ae(tile,a);}else{if(size==2){icon.ondblclick=function(){prompt("",_135);};}}if(num!=null&&(num>1||num.length)){_=g_createGlow(num,"q1");_.style.right="0";_.style.bottom="0";_.style.position="absolute";ae(tile,_);}if(qty!=null&&qty>0){_=g_createGlow("("+qty+")","q");_.style.left="0";_.style.top="0";_.style.position="absolute";ae(tile,_);}ae(icon,tile);return icon;},over:function(){if(this.tooltip!=null){Tooltip.show(this,this.tooltip,0,0);}},out:function(){Tooltip.hide();}};var Tooltip={clip:"main-contents",create:function(_13e){var d=ce("div"),t=ce("table"),tb=ce("tbody"),tr1=ce("tr"),tr2=ce("tr"),td=ce("td"),th1=ce("th"),th2=ce("th"),th3=ce("th");d.className="tooltip";th1.style.backgroundPosition="top right";th2.style.backgroundPosition="bottom left";th3.style.backgroundPosition="bottom right";if(_13e){td.innerHTML=_13e;}ae(tr1,td);ae(tr1,th1);ae(tb,tr1);ae(tr2,th2);ae(tr2,th3);ae(tb,tr2);ae(t,tb);Tooltip.icon=ce("p");Tooltip.icon.style.visibility="hidden";ae(Tooltip.icon,ce("div"));ae(d,Tooltip.icon);ae(d,t);return d;},fix:function(_140,_141,_142){var _143=gE(_140,"table")[0],td=gE(_143,"td")[0],c=td.childNodes;if(c.length>=2&&c[0].nodeName=="TABLE"&&c[1].nodeName=="TABLE"){var m;if(c[1].offsetWidth>300){m=Math.max(300,c[0].offsetWidth)+20;}else{m=Math.max(c[0].offsetWidth,c[1].offsetWidth)+20;}if(m>20){_140.style.width=m+"px";c[0].style.width=c[1].style.width="100%";if(!_141&&_140.offsetHeight>document.body.clientHeight){_143.className="shrink";}}}if(_142){_140.style.visibility="visible";}},fixSafe:function(p1,p2,p3){if(Browser.ie){setTimeout(Tooltip.fix.bind(this,p1,p2,p3),1);}else{Tooltip.fix(p1,p2,p3);}},append:function(el,_149){var el=$(el);var _14b=Tooltip.create(_149);ae(el,_14b);Tooltip.fixSafe(_14b,1,1);},prepare:function(){if(!Tooltip.tooltip){var _=Tooltip.create();_.style.position="absolute";_.style.left=_.style.top="-2323px";var lay=ge("layers");ae(lay,_);Tooltip.tooltip=_;Tooltip.tooltipTable=gE(_,"table")[0];Tooltip.tooltipTd=gE(_,"td")[0];if(Browser.ie6){_=ce("iframe");_.src="javascript:0;";_.frameBorder=0;ae(lay,_);Tooltip.iframe=_;}}},move:function(x,y,w1,h1,_152,_153,clip,_155,tow,toh){if(!Tooltip.tooltipTable){return;}var _,left=x,top=y,cursorX=x,cursorY=y,minx=0,miny=0,windowSize=g_getWindowSize(),scroll=g_getScroll(),bcw=windowSize.w,bch=windowSize.h,bsl=scroll.x,bst=scroll.y;if(clip==null){clip=Tooltip.clip;}if(_155==null){_155=Tooltip.tooltip;tow=Tooltip.tooltipTable.offsetWidth;toh=Tooltip.tooltipTable.offsetHeight;}_155.style.width=tow+"px";if(clip){_=ge(clip);if(_){c=ac(_);minx=c[0];miny=c[1];if(_.offsetWidth+minx<=bsl+bcw){bcw=_.offsetWidth+minx-bsl;}if(_.offsetHeight+miny<=bst+bch){bch=_.offsetHeight+miny-bst;}}}if(left+w1+tow>bcw){left=Math.max(left-tow,minx)-_152;}else{left+=w1+_152;}if(left<minx){left=minx;}else{if(left+tow>bsl+bcw){left=bsl+bcw-tow;}}if(top-toh>Math.max(bst,miny)){top-=toh+_153;}else{top+=h1+_153;}if(top<miny){top=miny;}else{if(top+toh>bst+bch){top=Math.max(bst,bst+bch-toh);}}if(Tooltip.iconVisible){if(cursorX>=left-48&&cursorX<=left&&cursorY>=top-4&&cursorY<=top+48){top-=48-(cursorY-top);}}_155.style.left=left+"px";_155.style.top=top+"px";_155.style.visibility="visible";if(Browser.ie6&&Tooltip.iframe){_=Tooltip.iframe;_.style.left=left+"px";_.style.top=top+"px";_.style.width=tow+"px";_.style.height=toh+"px";_.style.display="";_.style.visibility="visible";}},show:function(_159,text,x,y,_15d){if(Tooltip.disabled){return;}var _;Tooltip.prepare();if(_15d){text="<span class=\""+_15d+"\">"+text+"</span>";}_=Tooltip.tooltip;_.style.width="550px";_.style.left="-2323px";_.style.top="-2323px";Tooltip.tooltipTd.innerHTML=text;_.style.display="";var _15f=ac(_159);Tooltip.fix(_,0,0);Tooltip.move(_15f[0],_15f[1],_159.offsetWidth,_159.offsetHeight,x,y);},showAtCursor:function(_160,text,x,y,_164){if(Tooltip.disabled){return;}if(!x||x<10){x=10;}if(!y||y<10){y=10;}_160=$E(_160);Tooltip.prepare();if(_164){text="<span class=\""+_164+"\">"+text+"</span>";}var _;_=Tooltip.tooltip;_.style.width="550px";_.style.left="-2323px";_.style.top="-2323px";Tooltip.tooltipTd.innerHTML=text;_.style.display="";var pos=g_getCursorPos(_160);Tooltip.fix(_,0,0);Tooltip.move(pos.x,pos.y,0,0,x,y);},showAtXY:function(text,x,y,_16a,_16b){if(Tooltip.disabled){return;}Tooltip.prepare();var _;_=Tooltip.tooltip;_.style.width="550px";_.style.left="-2323px";_.style.top="-2323px";Tooltip.tooltipTd.innerHTML=text;_.style.display="";Tooltip.fix(_,0,0);Tooltip.move(x,y,0,0,_16a,_16b,null,null,null,null);},cursorUpdate:function(_16d,x,y){if(Tooltip.disabled||!Tooltip.tooltip){return;}_16d=$E(_16d);if(!x||x<10){x=10;}if(!y||y<10){y=10;}var pos=g_getCursorPos(_16d);Tooltip.move(pos.x,pos.y,0,0,x,y);},hide:function(){if(Tooltip.tooltip){Tooltip.tooltip.style.display="none";Tooltip.tooltip.visibility="hidden";Tooltip.tooltipTable.className="";if(Browser.ie6){Tooltip.iframe.style.display="none";}Tooltip.setIcon(null);}},setIcon:function(icon){Tooltip.prepare();if(icon){Tooltip.icon.style.backgroundImage="url(http://static.wowhead.com/images/icons/medium/"+icon.toLowerCase()+".jpg)";Tooltip.icon.style.visibility="visible";}else{Tooltip.icon.style.backgroundImage="none";Tooltip.icon.style.visibility="hidden";}Tooltip.iconVisible=icon?1:0;}};var g_listviews={};function Listview(opt){cO(this,opt);if(this.id){var _173=(this.tabs?"tab-":"lv-")+this.id;if(this.parent){var d=ce("div");d.id=_173;ae($(this.parent),d);this.container=d;}else{this.container=ge(_173);}}else{return;}if(this.template){this.template=Listview.templates[this.template];}else{return;}g_listviews[this.id]=this;if(this.poundable==null){if(this.template.poundable!=null){this.poundable=this.template.poundable;}else{this.poundable=1;}}if(this.hideBands==null){this.hideBands=this.template.hideBands;}if(this.computeDataFunc==null&&this.template.computeDataFunc!=null){this.computeDataFunc=this.template.computeDataFunc;}if(this.createCbControls==null&&this.template.createCbControls!=null){this.createCbControls=this.template.createCbControls;}if(this.onBeforeCreate==null&&this.template.onBeforeCreate!=null){this.onBeforeCreate=this.template.onBeforeCreate;}if(this.onAfterCreate==null&&this.template.onAfterCreate!=null){this.onAfterCreate=this.template.onAfterCreate;}if(this.createNote==null&&this.template.createNote!=null){this.createNote=this.template.createNote;}this.rowOffset=0;if(this.mode==null){this.mode=this.template.mode;}this.mode|=0;if(this.nItemsPerPage==null){var ipp=this.template.nItemsPerPage;this.nItemsPerPage=(ipp!=null?ipp:50);}this.nItemsPerPage|=0;if(this.nItemsPerPage<=0){this.nItemsPerPage=0;}if(this.mode==3){if(this.nItemsPerRow==null){var ipr=this.template.nItemsPerRow;this.nItemsPerRow=(ipr!=null?ipr:4);}this.nItemsPerRow|=0;if(this.nItemsPerRow<=1){this.nItemsPerRow=1;}}else{this.nItemsPerRow=1;}this.columns=this.template.columns.slice(0);if(this.extraCols!=null){for(var i=0,len=this.extraCols.length;i<len;++i){var pos=null;var col=this.extraCols[i];if(col.after!=null){var _17a=in_array(this.columns,col.after,function(x){return x.id;});if(_17a!=-1){pos=_17a+1;}}if(pos==null){pos=this.columns.length;}this.columns.splice(pos,0,col);}}this.visibility=[];var _17c=[],hiddenCols=[];if(this.visibleCols!=null){array_walk(this.visibleCols,function(x){_17c[x]=1;});}if(this.hiddenCols!=null){array_walk(this.hiddenCols,function(x){hiddenCols[x]=1;});}for(var i=0,len=this.columns.length;i<len;++i){var col=this.columns[i];if(_17c[col.id]!=null||(!col.hidden&&hiddenCols[col.id]==null)){this.visibility.push(i);}}if(this.sort==null&&this.template.sort){this.sort=this.template.sort.slice(0);}else{if(this.sort!=null){var _181=this.sort;this.sort=[];for(var i=0,len=_181.length;i<len;++i){var col=parseInt(_181[i]);if(isNaN(col)){var desc=0;if(_181[i].charAt(0)=="-"){desc=1;_181[i]=_181[i].substring(1);}var _185=in_array(this.columns,_181[i],function(x){return x.id;});if(_185!=-1){if(desc){this.sort.push(-(_185+1));}else{this.sort.push(_185+1);}}}else{this.sort.push(col);}}}}if(this.tabs){this.tabIndex=this.tabs.add(this.getTabName(),{id:this.id,onLoad:this.initialize.bind(this)});}else{this.initialize();}}Listview.prototype={initialize:function(){if(!this.data.length){this.showNoData();return;}if(this.computeDataFunc!=null){for(var i=0,len=this.data.length;i<len;++i){this.computeDataFunc(this.data[i]);}}if(this.tabs){this.pounded=(this.tabs.poundedTab==this.tabIndex);if(this.pounded){this.readPound();}}else{this.readPound();}this.updateSortIndex();var _188;if(this.onBeforeCreate!=null){_188=this.onBeforeCreate();}if(this.mode==2){this.mainDiv=ce("div");this.mainDiv.className="listview-mode2";this.refreshRows();this.createBands(this.mainDiv);}else{this.table=ce("table");this.thead=ce("thead");this.tbody=ce("tbody");if(this.mode==3){this.tbody.className="listview-mode3";var grp=ce("colgroup");var _18a=(100/this.nItemsPerRow)+"%";for(var i=0;i<this.nItemsPerRow;++i){var col=ce("col");col.style.width=_18a;ae(grp,col);}ae(this.table,grp);}else{this.tbody.className="listview-std";this.createHeader();this.updateSortArrow();}ae(this.table,this.thead);ae(this.table,this.tbody);this.refreshRows();this.createBands(this.table);if(this.mode==1&&Browser.ie){setTimeout(Listview.cbIeFix.bind(this),1);}}if(this.onAfterCreate!=null){this.onAfterCreate(_188);}},createHeader:function(){var tr=ce("tr");if(this.mode==1){var th=ce("th");var div=ce("div");var a=ce("a");th.style.width="33px";if(this.poundable==2){a.style.cursor="default";a.style.backgroundColor="#585858";}a.href="javascript:;";a.className="listview-cb";ns(a);ae(a,ct(String.fromCharCode(160)));ae(div,a);ae(th,div);ae(tr,th);}for(var i=0,len=this.visibility.length;i<len;++i){var _192=this.visibility[i];var col=this.columns[_192];var th=ce("th");var div=ce("div");var a=ce("a");var _197=ce("span");var _198=ce("span");if(this.poundable==2){a.style.cursor="default";a.style.backgroundColor="#585858";}a.href="javascript:;";a.onclick=this.sortBy.bind(this,_192+1);ns(a);if(col.width!=null){th.style.width=col.width;}if(col.align!=null){th.style.textAlign=col.align;}if(col.span!=null){th.colSpan=col.span;}ae(_198,ct(col.name));ae(_197,_198);ae(a,_197);ae(div,a);ae(th,div);ae(tr,th);}ae(this.thead,tr);},createBands:function(_199){var _19a=ce("div"),bandBot=ce("div");_19a.className="listview-band-top";bandBot.className="listview-band-bottom";this.navTop=this.createNav();this.navBot=this.createNav();var _19b=ce("div"),noteBot=ce("div");_19b.className=noteBot.className="listview-note";if(this.note){_19b.innerHTML=this.note;}else{if(this.createNote){this.createNote(_19b,noteBot);}}if(!_19b.firstChild&&this.mode!=1){ae(_19b,ct(String.fromCharCode(160)));}if(this.mode!=1){ae(noteBot,ct(String.fromCharCode(160)));}ae(_19a,this.navTop);ae(bandBot,this.navBot);ae(_19a,_19b);ae(bandBot,noteBot);if(this.mode==1){ae(_19a,this.createCbBar());ae(bandBot,this.createCbBar());}this.bandTop=_19a;this.bandBot=bandBot;this.updateNav();if(this.hideBands!=null){_19a.style.display=bandBot.style.display="none";}ae(this.container,this.bandTop);ae(this.container,_199);ae(this.container,this.bandBot);},createNav:function(){var div=ce("div");div.className="listview-nav";var a1=ce("a"),a2=ce("a"),a3=ce("a"),a4=ce("a");a1.href=a2.href=a3.href=a4.href="javascript:;";ae(a1,ct(String.fromCharCode(171)+" First"));ae(a2,ct(String.fromCharCode(8249)+" Previous"));ae(a3,ct("Next "+String.fromCharCode(8250)));ae(a4,ct("Last "+String.fromCharCode(187)));ns(a1);ns(a2);ns(a3);ns(a4);a1.onclick=this.firstPage.bind(this);a2.onclick=this.previousPage.bind(this);a3.onclick=this.nextPage.bind(this);a4.onclick=this.lastPage.bind(this);var span=ce("span");var b1=ce("b"),b2=ce("b"),b3=ce("b");ae(b1,ct("a"));ae(b2,ct("a"));ae(b3,ct("a"));ae(span,b1);ae(span,ct(" - "));ae(span,b2);ae(span,ct(" of "));ae(span,b3);ae(div,a1);ae(div,a2);ae(div,span);ae(div,a3);ae(div,a4);return div;},createCbBar:function(){var div=ce("div");var div2=ce("div");var a1=ce("a"),a2=ce("a"),a3=ce("a");a1.href=a2.href=a3.href="javascript:;";ae(a1,ct("All"));ae(a2,ct("None"));ae(a3,ct("Inverse"));a1.onclick=Listview.cbSelect.bind(this,true);a2.onclick=Listview.cbSelect.bind(this,false);a3.onclick=Listview.cbSelect.bind(this,null);ns(a1);ns(a2);ns(a3);ae(div2,ct("Select: "));ae(div2,a1);ae(div2,ct(", "));ae(div2,a2);ae(div2,ct(", "));ae(div2,a3);if(this.createCbControls){var div1=ce("div");this.createCbControls(div1,div2);div1.style.paddingBottom="6px";ae(div,div1);}ae(div,div2);return div;},refreshRows:function(){var len=this.data.length;var _=(this.mode==2?this.mainDiv:this.tbody);while(_.firstChild){_.removeChild(_.firstChild);}if(len>0){var _1a6,endi,func;if(this.nItemsPerPage>0){_1a6=this.rowOffset;endi=Math.min(len,this.rowOffset+this.nItemsPerPage);}else{_1a6=0;endi=len;}if(this.mode==2){for(var i=_1a6;i<endi;++i){ae(this.mainDiv,this.getDiv(i));}}else{if(this.mode==3){var j=0,tr=ce("tr");for(var i=_1a6;i<endi;++i){ae(tr,this.getCell(i));if(++j==this.nItemsPerRow){ae(this.tbody,tr);if(i+1<endi){tr=ce("tr");}j=0;}}if(j!=4){for(;j<4;++j){_=ce("td");_.className="empty-cell";ae(tr,_);}ae(this.tbody,tr);}}else{for(var i=_1a6;i<endi;++i){ae(this.tbody,this.getRow(i));}}}}else{this.bandTop.style.display=this.bandBot.style.display="none";if(this.mode==2){this.mainDiv.style.display="none";}else{this.table.style.display="none";}this.showNoData();}},showNoData:function(){var div=ce("div");div.className="listview-nodata";var _1ac=-1;if(this.template.onNoData){_1ac=(this.template.onNoData.bind(this,div))();}if(_1ac==-1){ae(div,ct("There is no data to display."));}ae(this.container,div);},getDiv:function(i){var _1ae=this.data[i];if(_1ae.__div==null){this.createDiv(_1ae,i);}return _1ae.__div;},createDiv:function(_1af,i){var div=ce("div");_1af.__div=div;(this.template.compute.bind(this,_1af,div,i))();},getCell:function(i){var cell=this.data[i];if(cell.__div==null){this.createCell(cell);}return cell.__td;},createCell:function(cell){var td=ce("td");cell.__td=td;(this.template.compute.bind(this,cell,td))();if(this.template.getItemLink){td.onclick=this.itemClick.bind(this,cell);if(Browser.ie6){td.onmouseover=Listview.itemOver;td.onmouseout=Listview.itemOut;}}},getRow:function(i){var row=this.data[i];if(row.__tr==null){this.createRow(row);}return row.__tr;},createRow:function(row){var tr=ce("tr");row.__tr=tr;if(this.mode==1){var td=ce("td");td.className="listview-cb";td.onclick=Listview.cbCellClick;var cb=ce("input");ns(cb);cb.type="checkbox";cb.onclick=Listview.cbClick;if(row.__chk){cb.checked=true;if(Browser.ie){cb.defaultChecked=true;}}row.__cb=cb;ae(td,cb);ae(tr,td);}for(var i=0,len=this.visibility.length;i<len;++i){var _1bd=this.visibility[i];var col=this.columns[_1bd];var td=ce("td");if(col.align!=null){td.style.textAlign=col.align;}var _1c0=null;if(col.compute){_1c0=(col.compute.bind(this,row,td,tr))();}else{if(row[col.value]!=null){ae(td,ct(row[col.value]));}else{_1c0=-1;}}if(_1c0!=-1&&_1c0!=null){td.insertBefore(ct(_1c0),td.firstChild);}ae(tr,td);}if(this.mode==1&&row.__chk){tr.className="checked";}if(this.template.getItemLink){tr.onclick=this.itemClick.bind(this,row);if(Browser.ie6){tr.onmouseover=Listview.itemOver;tr.onmouseout=Listview.itemOut;}}},itemClick:function(_1c1,e){e=$E(e);var i=0,el=e._target;while(el&&i<3){if(el.nodeName=="A"){return;}el=el.parentNode;}location.href=this.template.getItemLink(_1c1);},validatePage:function(){var rpp=this.nItemsPerPage,ro=this.rowOffset,len=this.data.length;if(ro<0){this.rowOffset=0;}else{this.rowOffset=this.getRowOffset(ro+rpp>len?len-1:ro);}},getRowOffset:function(_1c5){var rpp=this.nItemsPerPage;return (rpp>0&&_1c5>0?Math.floor(_1c5/rpp)*rpp:0);},changePage:function(){this.validatePage();this.refreshRows();this.updateNav();this.updatePound();var _1c7=g_getScroll(),c=ac(this.container);if(_1c7.y>c[1]){scrollTo(_1c7.x,c[1]);}},firstPage:function(){this.rowOffset=0;this.changePage();},previousPage:function(){this.rowOffset-=this.nItemsPerPage;this.changePage();},nextPage:function(){this.rowOffset+=this.nItemsPerPage;this.changePage();},lastPage:function(){this.rowOffset=99999999;this.changePage();},addSort:function(a,_1c9){var i=in_array(a,_1c9,function(x){return Math.abs(x);});if(i!=-1){_1c9=a[i];a.splice(i,1);}a.splice(0,0,_1c9);},sortBy:function(_1cc){if(this.poundable==2||_1cc<=0||_1cc>this.columns.length){return;}if(Math.abs(this.sort[0])==_1cc){this.sort[0]=-this.sort[0];}else{this.addSort(this.sort,_1cc);}this.applySort();if(this.template.onSort){(this.template.onSort.bind(this))();}this.refreshRows();if(this.mode!=2){this.updateSortArrow();}this.updatePound();},applySort:function(){Listview.sort=this.sort;Listview.columns=this.columns;if(this.indexCreated){this.data.sort(Listview.sortIndexedRows);}else{this.data.sort(Listview.sortRows);}this.updateSortIndex();},setSort:function(sort,_1ce,_1cf){if(this.sort.toString()!=sort.toString()){this.sort=sort;this.applySort();if(_1ce){this.refreshRows();}if(_1cf){this.updatePound();}}},readPound:function(){if(!this.poundable||!location.hash.length){return;}var _=location.hash.substr(1);if(this.tabs){var n=_.indexOf(":");if(n==-1){return;}_=_.substr(n+1);}var num=parseInt(_);if(!isNaN(num)){this.rowOffset=num;this.validatePage();if(this.poundable!=2){var sort=[];var _1d4=_.match(/(\+|\-)[0-9]+/g);if(_1d4!=null){for(var i=_1d4.length-1;i>=0;--i){var _1d6=parseInt(_1d4[i])|0;var _=Math.abs(_1d6);if(_<=0||_>this.columns.length){break;}this.addSort(sort,_1d6);}this.setSort(sort,false,false);}}if(this.tabs){this.tabs.setTabPound(this.tabIndex,this.getTabPound());}}},updateSortArrow:function(){if(!this.sort.length){return;}var i=in_array(this.visibility,Math.abs(this.sort[0])-1);if(i==-1){return;}if(this.mode==1){++i;}var span=this.thead.firstChild.childNodes[i].firstChild.firstChild.firstChild;if(this.lsa&&this.lsa!=span){this.lsa.className="";}span.className=(this.sort[0]<0?"sortdesc":"sortasc");this.lsa=span;},updateSortIndex:function(){var _=this.data;for(var i=0,len=_.length;i<len;++i){_[i].__si=i;}this.indexCreated=true;},updateTabName:function(){if(this.tabIndex!=null){this.tabs.setTabName(this.tabIndex,this.getTabName());}},updatePound:function(){if(!this.poundable){return;}var _=this.getTabPound();if(this.tabs){this.tabs.setTabPound(this.tabIndex,_);location.replace("#"+this.id+":"+_);}else{location.replace("#"+_);}},updateNav:function(){var _=this.nItemsPerPage,__=this.rowOffset,___=this.data.length;var _1de=0,previous=0,next=0,last=0;if(_){if(__>0){previous=1;if(__>=_+_){_1de=1;}}if(__+_<___){next=1;if(__+_+_<___){last=1;}}}var arr=[this.navTop,this.navBot];for(var i=0;i<2;++i){var _1e1=arr[i].childNodes;_1e1[0].style.display=(_1de?"":"none");_1e1[1].style.display=(previous?"":"none");_1e1[3].style.display=(next?"":"none");_1e1[4].style.display=(last?"":"none");_1e1=_1e1[2].childNodes;_1e1[0].firstChild.nodeValue=__+1;_1e1[2].firstChild.nodeValue=_?Math.min(__+_,___):___;_1e1[4].firstChild.nodeValue=___;}},getTabName:function(){var name=this.name;var n=this.data.length;if(n>0){name+=" ("+n+")";}return name;},getTabPound:function(){var _1e4="";_1e4+=this.rowOffset;if(this.poundable!=2&&this.sort.length){_1e4+=("+"+this.sort.join("+")).replace(/\+\-/g,"-");}return _1e4;},getCheckedRows:function(){var rows=[];for(var i=0,len=this.data.length;i<len;++i){var _=this.data[i];if((_.__cb&&_.__cb.checked)||(!_.__cb&&_.__chk)){rows.push(_);}}return rows;},deleteRows:function(rows){if(!rows.length){return;}var _1e9=0;var foo=0;for(var i=rows.length-1;i>=0;--i){var row=rows[i];var _1ed=-1;if(row.__tr&&row.__tr.rowIndex>0){_1ed=this.rowOffset+row.__tr.rowIndex-1;}else{_1ed=in_array(this.data,row);foo=1;}if(_1ed==-1){continue;}++_1e9;var rpp=this.nItemsPerPage;var _1ef=this.rowOffset;var last=_1ef+(rpp>0?rpp:this.data.length)-1;if(_1ed>=_1ef&&_1ed<=last){if(this.mode==2){de(row.__div);}else{de(row.__tr);}}this.data.splice(_1ed,1);}if(_1e9==0){return;}this.updateTabName();if(this.rowOffset>=this.data.length){this.previousPage();}else{if(this.data.length==0||foo){this.refreshRows();}this.updateNav();var rpp=this.nItemsPerPage;var _1f2=(this.mode==2?this.mainDiv:this.tbody);var _1f3=(this.mode==2?this.getDiv:this.getRow);var ntrs=_1f2.childNodes.length;if(rpp>0&&this.rowOffset+ntrs<this.data.length){for(var i=this.rowOffset+ntrs,lasti=i+rpp-ntrs;i<lasti;++i){ae(_1f2,_1f3(i));}}}}};Listview.sortRows=function(a,b){var sort=Listview.sort,cols=Listview.columns;for(var i=0,len=sort.length;i<len;++i){var res,_=cols[Math.abs(sort[i])-1];if(_.sortFunc){res=_.sortFunc(a,b,sort[i]);}else{res=strcmp(a[_.value],b[_.value]);}if(res!=0){return res*sort[i];}}return 0;},Listview.sortIndexedRows=function(a,b){var sort=Listview.sort,cols=Listview.columns;var res,_=cols[Math.abs(sort[0])-1];if(_.sortFunc){res=_.sortFunc(a,b,sort[0]);}else{res=strcmp(a[_.value],b[_.value]);}if(res!=0){return res*sort[0];}return a.__si-b.__si;},Listview.cbSelect=function(v){for(var i=0,len=this.data.length;i<len;++i){var _=this.data[i];var v2=v;if(_.__tr){var __=_.__tr.firstChild.firstChild;if(v2==null){v2=!__.checked;}if(__.checked!=v2){__.checked=v2;_.__tr.className=(__.checked?"checked":"");if(Browser.ie){__.defaultChecked=v2;if(Browser.ie6){(Listview.itemOut.bind(_.__tr))();}}}}else{if(v2==null){v2=true;}}_.__chk=v2;}};Listview.cbClick=function(e){setTimeout(Listview.cbUpdate.bind(0,0,this,this.parentNode.parentNode),1);sp(e);};Listview.cbCellClick=function(e){setTimeout(Listview.cbUpdate.bind(0,1,this.firstChild,this.parentNode),1);sp(e);};Listview.cbIeFix=function(){var rows=gE(this.tbody,"tr");for(var i=0,len=rows.length;i<len;++i){var _=rows[i].firstChild.firstChild;_.checked=_.defaultChecked=false;}};Listview.cbUpdate=function(_209,cb,tr){if(_209){cb.checked=!cb.checked;}tr.className=(cb.checked?"checked":"");if(Browser.ie){cb.defaultChecked=cb.checked;if(Browser.ie6){(Listview.itemOver.bind(tr))();}}};Listview.itemOver=function(){this.style.backgroundColor=(this.className=="checked"?"#2C2C2C":"#202020");};Listview.itemOut=function(){this.style.backgroundColor=(this.className=="checked"?"#242424":"transparent");};Listview.extraCols={cost:{id:"cost",name:LANG.cost,compute:function(row,td){Listview.funcBox.appendMoney(td,row.cost[0],null,row.cost[1],row.cost[2],row.cost[3]);},sortFunc:function(a,b,col){var lena=0,lenb=0;if(a.cost[3]!=null){array_walk(a.cost[3],function(x,_,_,i){lena+=Math.pow(10,i)+x[1];});}if(b.cost[3]!=null){array_walk(b.cost[3],function(x,_,_,i){lenb+=Math.pow(10,i)+x[1];});}return strcmp(lena,lenb)||strcmp(a.cost[2],b.cost[2])||strcmp(a.cost[1],b.cost[1])||strcmp(a.cost[0],b.cost[0]);}},count:{id:"count",name:LANG.count,width:"11%",value:"count",compute:function(row,td){if(row.outof){var d=ce("div");d.className="small q0";ae(d,ct("out of "+row.outof));ae(td,d);}return row.count;}},percent:{id:"percent",name:"%",width:"10%",value:"percent",compute:function(row,td){if(row.percent>=1.95){return row.percent.toFixed(0);}else{return parseFloat(row.percent.toFixed(1));}}},stock:{id:"stock",name:LANG.stock,width:"10%",value:"stock",compute:function(row,td){if(row.stock>0){return row.stock;}else{td.style.fontFamily="Verdana, sans-serif";return String.fromCharCode(8734);}}}};Listview.funcBox={createSimpleCol:function(i,n,w,v){return {id:i,name:LANG[n],width:w,value:v};},initLootTable:function(row){if(this._totalCount!=null){row.percent=row.count/this._totalCount;}else{row.percent=row.count/row.outof;}row.percent*=100;},beforeUserComments:function(){if((g_user.roles&26)!=0||(typeof g_pageInfo=="object"&&g_user.name==g_pageInfo.username)){this.mode=1;this.createCbControls=function(d){var i=ce("input");i.type="button";i.value="Delete";i.onclick=(function(){var rows=this.getCheckedRows();if(!rows.length){alert("No comments selected.");}else{if(confirm("Are you sure that you want to delete "+(rows.length==1?"this comment":"these "+rows.length+" comments")+"?")){var ids="";var _22a=0;array_walk(rows,function(x){if(x.purged==0&&x.deleted==0){x.deleted=1;if(x.__tr!=null){x.__tr.childNodes[2].lastChild.lastChild.firstChild.nodeValue=" (Deleted)";}ids+=x.id+",";}else{if(x.purged==1){++_22a;}}});ids=rtrim(ids,",");if(ids!=""){new Ajax("/?comment=delete&id="+ids+"&username="+g_pageInfo.username);}(Listview.cbSelect.bind(this,false))();if(_22a>0){alert("Purged comments cannot be deleted.\n\nA purged comment is a comment that has been\nautomatically removed from the site due to a negative rating.");}}}}).bind(this);ae(d,i);if(g_user.roles&26){var i=ce("input");i.type="button";i.value="Undelete";i.onclick=(function(){var rows=this.getCheckedRows();if(!rows.length){alert("No comments selected.");}else{var ids="";array_walk(rows,function(x){if(x.deleted==1){x.deleted=0;if(x.__tr!=null){x.__tr.childNodes[2].lastChild.lastChild.firstChild.nodeValue="";}ids+=x.id+",";}});ids=rtrim(ids,",");if(ids!=""){new Ajax("/?comment=undelete&id="+ids+"&username="+g_pageInfo.username);}(Listview.cbSelect.bind(this,false))();}}).bind(this);ae(d,i);}};}},assocArrCmp:function(a,b,arr){if(a==null){return -1;}else{if(b==null){return 1;}}var n=Math.max(a.length,b.length);for(var i=0;i<n;++i){if(a[i]==null){return -1;}else{if(b[i]==null){return 1;}}var res=strcmp(arr[a[i]],arr[b[i]]);if(res!=0){return res;}}return 0;},location:function(row,td){if(row.location==null){return -1;}for(var i=0,len=row.location.length;i<len;++i){if(i>0){ae(td,ct(", "));}var _239=row.location[i];if(_239==-1){ae(td,ct("..."));}else{var a=ce("a");a.className="q1";a.href="/?zone="+_239;ae(a,ct(g_zones[_239]));ae(td,a);}}},createCenteredIcons:function(_23b,td,text){if(_23b!=null){var d=ce("div"),d2=ce("div");if(text){var bibi=ce("div");bibi.style.position="relative";bibi.style.width="1px";var _240=ce("div");_240.className="q0";_240.style.position="absolute";_240.style.right="2px";_240.style.lineHeight="26px";_240.style.fontSize="11px";_240.style.whiteSpace="nowrap";ae(_240,ct(text));ae(bibi,_240);ae(d,bibi);}for(var i=0,len=_23b.length;i<len;++i){var id,num;if(typeof _23b[i]=="object"){id=_23b[i][0];num=_23b[i][1];}else{id=_23b[i];}var icon=g_items.createIcon(id,0,num);icon.style.cssFloat=icon.style.styleFloat="left";ae(d,icon);}d.style.margin="0 auto";d.style.textAlign="left";d.style.width=(26*_23b.length)+"px";d2.className="clear";ae(td,d);ae(td,d2);return true;}},getItemType:function(_244,_245,_246){if(_246!=null&&g_item_subsubclasses[_244]!=null&&g_item_subsubclasses[_244][_245]!=null){return g_item_subsubclasses[_244][_245][_246];}if(g_item_subclasses[_244]!=null){return g_item_subclasses[_244][_245];}else{return g_item_classes[_244];}},getQuestCategory:function(_247){if(_247>0){return g_zones[_247];}else{return g_quest_sorts[-_247];}},createTextRange:function(min,max){min|=0;max|=0;if(min>1||max>1){if(min!=max&&max>0){return min+"-"+max;}else{return min+"";}}return null;},coGetColor:function(_24a,mode){if(mode==-1){var foo=_24a.divPost.childNodes[1].className.match(/comment-([a-z]+)/);if(foo!=null){return " comment-"+foo[1];}}else{if(_24a.roles&2){return " comment-blue";}else{if(_24a.rating>=10){return " comment-green";}else{if(_24a.rating<0){return " comment-bt";}}}}return "";},coToggleVis:function(_24d){this.firstChild.nodeValue=(g_toggleDisplay(_24d.divBody)?"Hide comment":"Show comment");if(_24d.ratable){_24d.divHeader.firstChild.lastChild.style.display="";}g_toggleDisplay(_24d.divLinks);if(_24d.lastEdit!=null){g_toggleDisplay(_24d.divLastEdit);}},coRate:function(_24e,_24f){if(_24f==0){var _250=5;if(g_user.roles&2){_250=25;}else{if(g_user.roles&16){_250=15;}}var foo=prompt("Please enter a rating value between -"+_250+" and "+_250+":",0);if(foo==null){return;}else{foo|=0;if(foo!=0&&Math.abs(foo)<=_250){_24f=foo;}}if(_24f==0){return;}}else{if(g_user.roles&26){_24f*=5;}}new Ajax("/?comment=rate&id="+_24e.id+"&rating="+_24f);_24e.rating+=_24f;_=_24e.divHeader.firstChild;_=_.childNodes[_.childNodes.length-3];_.lastChild.firstChild.nodeValue=(_24e.rating>0?"+":"")+_24e.rating;Tooltip.hide();de(_.nextSibling);de(_.nextSibling);},coDelete:function(_252){if(_252.purged){alert("This comment has been automatically purged due to a negative rating. It cannot be deleted.");}else{if(confirm("Are you sure that you want to delete this comment?")){new Ajax("/?comment=delete&id="+_252.id);this.deleteRows([_252]);}}},coEdit:function(_253,mode){_253.divBody.style.display="none";_253.divLinks.firstChild.style.display="none";var _255=ce("div");_255.className="comment-edit";_253.divEdit=_255;if(mode==-1){if(g_users[_253.user]!=null){_253.roles=g_users[_253.user].roles;}}var ta=Listview.funcBox.coEditAppend(_255,_253,mode);var _257=ce("div");_257.className="comment-edit-buttons";var ip=ce("input");ip.type="button";ip.value="Save";ip.onclick=Listview.funcBox.coEditButton.bind(ip,_253,true,mode);ae(_257,ip);ae(_257,ct(" "));ip=ce("input");ip.type="button";ip.value="Cancel";ip.onclick=Listview.funcBox.coEditButton.bind(ip,_253,false,mode);ae(_257,ip);ae(_255,_257);var _259=_255;if(Browser.ie6){_259=ce("div");_259.style.width="99%";ae(_259,_255);}if(mode==-1){_253.divPost.insertBefore(_259,_253.divBody.nextSibling);}else{_253.__div.insertBefore(_259,_253.divBody.nextSibling);}ta.focus();},coEditAppend:function(div,_25b,mode){var _25d=Listview.funcBox.coGetCharLimit(mode);if(mode==1||mode==3||mode==4){_25b.roles=g_user.roles;_25b.rating=1;}else{if(mode>=1){_25b.roles=0;_25b.rating=1;}}if(mode==-1||mode==0){var _25e=ce("div");_25e.className="comment-edit-modes";ae(_25e,ct("Mode:"));var _25f=ce("a");_25f.className="selected";_25f.onclick=Listview.funcBox.coModeLink.bind(_25f,1,mode);_25f.href="javascript:;";ae(_25f,ct("Edit"));ae(_25e,_25f);ae(_25e,ct("|"));var _260=ce("a");_260.onclick=Listview.funcBox.coModeLink.bind(_260,2,mode);_260.href="javascript:;";ae(_260,ct("Preview"));ae(_25e,_260);_25f.onmousedown=_260.onmousedown=rf;ae(div,_25e);}var _261=ce("div");_261.style.display="none";_261.className="comment-body"+Listview.funcBox.coGetColor(_25b,mode);ae(div,_261);var _262=ce("div");_262.className="comment-edit-body";var tb=ce("div");tb.className="toolbar";var ta=ce("textarea");ta.className="comment-editbox";ta.rows=10;ta.value=_25b.body;switch(mode){case 1:ta.name="commentbody";ta.onfocus=g_revealCaptcha;break;case 2:ta.name="desc";ta.originalValue=_25b.body;break;case 3:ta.name="body";ta.onfocus=g_revealCaptcha;break;case 4:ta.name="sig";ta.originalValue=_25b.body;ta.rows=(Browser.gecko?2:3);ta.style.height="auto";break;}if(mode!=-1&&mode!=0){var h3=ce("h3"),ah3=ce("a"),preview=ce("div"),pad=ce("div");var func=Listview.funcBox.coLivePreview.bind(ta,_25b,mode,preview);if(_25b.body){ah3.className="disclosure-off";preview.style.display="none";}else{ah3.className="disclosure-on";}ae(ah3,ct("Live Preview"));ae(h3,ah3);ah3.href="javascript:;";ah3.onclick=function(){func(1);ah3.className="disclosure-"+(g_toggleDisplay(preview)?"on":"off");};ns(ah3);h3.className="first";pad.className="pad";ae(_261,h3);ae(_261,preview);ae(_261,pad);var foo;var _268=function(){if(foo){clearTimeout(foo);foo=null;}foo=setTimeout(func,50);};ta.onchange=_268;ta.onkeyup=_268;aE(ta,"focus",function(){func();_261.style.display="";if(mode!=4){ta.style.height="22em";}});}else{if(mode!=4){aE(ta,"focus",function(){ta.style.height="22em";});}}var _269=[{id:"b",title:"Bold",pre:"[b]",post:"[/b]"},{id:"i",title:"Italic",pre:"[i]",post:"[/i]"},{id:"u",title:"Underline",pre:"[u]",post:"[/u]"},{id:"s",title:"Strikethrough",pre:"[s]",post:"[/s]"},{id:"small",title:"Small text",pre:"[small]",post:"[/small]"},{id:"url",title:"Link",onclick:function(){var url=prompt("Please enter the URL of your link:","http://");if(url){g_insertTag(ta,"[url="+url+"]","[/url]");}}},{id:"quote",title:"Quote box",pre:"[quote]",post:"[/quote]"},{id:"code",title:"Code box",pre:"[code]",post:"[/code]"},{id:"ul",title:"Unordered list (bullets)",pre:"[ul]\n[li]",post:"[/li]\n[/ul]",rep:function(txt){return txt.replace(/\n/g,"[/li]\n[li]");}},{id:"ol",title:"Ordered list (numbers)",pre:"[ol]\n[li]",post:"[/li]\n[/ol]",rep:function(txt){return txt.replace(/\n/g,"[/li]\n[li]");}},{id:"li",title:"List item",pre:"[li]",post:"[/li]"}];for(var i=0,len=_269.length;i<len;++i){var _26e=_269[i];if(mode==4&&_26e.id=="quote"){break;}var but=ce("button");var img=ce("img");but.setAttribute("type","button");but.title=_26e.title;if(_26e.onclick!=null){but.onclick=_26e.onclick;}else{but.onclick=g_insertTag.bind(0,ta,_26e.pre,_26e.post,_26e.rep);}img.src="http://static.wowhead.com/images/pixel.gif";img.className="toolbar-"+_26e.id;ae(but,img);ae(tb,but);}ae(_262,tb);ae(_262,ta);ae(_262,ce("br"));if(mode==4){ae(_262,ct("Up to "+_25d+" characters and/or 3 lines. The following tags can be used: [b], [i], [u], [s], [small], and [url]."));}else{ae(_262,ct("Up to "+_25d+" characters. You can use "));var _271=ce("a");_271.href="/?help=comment-formatting";_271.target="_blank";ae(_271,ct("tags"));ae(_262,_271);ae(_262,ct(" to format your "+(mode==2?"description":mode==3||mode==-1?"posts":"comments")+"."));}ae(div,_262);return ta;},coLivePreview:function(_272,mode,div,_275){if(_275!=1&&div.style.display=="none"){return;}var ta=this,charLimit=Listview.funcBox.coGetCharLimit(mode),str=(ta.value.length>charLimit?ta.value.substring(0,charLimit):ta.value);if(mode==4){var foo;if((foo=str.indexOf("\n"))!=-1&&(foo=str.indexOf("\n",foo+1))!=-1&&(foo=str.indexOf("\n",foo+1))!=-1){str=str.substring(0,foo);}}var html=Markup.toHtml(str,{mode:Markup.MODE_COMMENT});if(html){div.innerHTML=html;}else{div.innerHTML="<span class=\"q6\">...</span>";}},coEditButton:function(_279,_27a,mode){if(_27a){var ta=gE(_279.divEdit,"textarea")[0];if(!Listview.funcBox.coValidate(ta,mode)){return;}if(ta.value!=_279.body){var _27d=0;if(_279.lastEdit!=null){_27d=_279.lastEdit[1];}++_27d;_279.lastEdit=[g_serverTime,_27d,g_user.name];Listview.funcBox.coUpdateLastEdit(_279);_279.divBody.innerHTML=Markup.toHtml((ta.value.length>7500?ta.value.substring(0,7500):ta.value),{mode:Markup.MODE_COMMENT});_279.body=ta.value;if(mode==-1){new Ajax("/?forums=editpost&id="+_279.id,{method:"POST",params:"body="+urlencode(_279.body)});}else{new Ajax("/?comment=edit&id="+_279.id,{method:"POST",params:"body="+urlencode(_279.body)});}}}_279.divBody.style.display="";_279.divLinks.firstChild.style.display="";de(_279.divEdit);_279.divEdit=null;},coGetCharLimit:function(mode){if(mode==4){return 250;}else{return 7500;}},coModeLink:function(mode,m){var _281=Listview.funcBox.coGetCharLimit(mode);var _282=Markup.MODE_COMMENT;array_walk(gE(this.parentNode,"a"),function(x){x.className="";});this.className="selected";var ta=gE(this.parentNode.parentNode,"textarea")[0],taContainer=ta.parentNode,preview=taContainer.previousSibling;if(m==4){_282=Markup.MODE_SIGNATURE;}switch(mode){case 1:taContainer.style.display="";preview.style.display="none";taContainer.firstChild.focus();break;case 2:taContainer.style.display="none";var str=(ta.value.length>_281?ta.value.substring(0,_281):ta.value);if(m==4){var foo;if((foo=str.indexOf("\n"))!=-1&&(foo=str.indexOf("\n",foo+1))!=-1&&(foo=str.indexOf("\n",foo+1))!=-1){str=str.substring(0,foo);}}preview.innerHTML=Markup.toHtml(str,{mode:_282});preview.style.display="";break;}},coReply:function(_287){document.forms["addcomment"].elements["replyto"].value=_287.replyTo;var _=ge("gjkdlfgkjh436");gE(_,"span")[0].innerHTML=_287.user;_.style.display="";co_addYourComment();},coValidate:function(ta,mode){mode|=0;if(mode==1||mode==-1){if(trim(ta.value).length<1){alert("Your post is empty!");return false;}}else{if(trim(ta.value).length<10){alert("Your comment must be at least 10 characters long.\n\nPlease elaborate a little.");return false;}}if(ta.value.length>7500){if(!confirm("Your "+(mode==1?"post":"comment")+" is longer than 7500 characters and will be truncated after:\n\n\""+ta.value.substring(7470,7500)+"\"\n\nDo you want to proceed anyway?")){return false;}}return true;},coCustomRatingOver:function(_28b){Tooltip.showAtCursor(_28b,"Custom rating",0,0,"q");},coPlusRatingOver:function(_28c){Tooltip.showAtCursor(_28c,"Insightful/funny",0,0,"q2");},coMinusRatingOver:function(_28d){Tooltip.showAtCursor(_28d,"Poor/redundant",0,0,"q7");},coSortDate:function(me){me.nextSibling.nextSibling.className="";me.className="selected";this.mainDiv.className="listview-aci";this.setSort([1],true,false);},coSortHighestRatedFirst:function(me){me.previousSibling.previousSibling.className="";me.className="selected";this.mainDiv.className="";this.setSort([-3,2],true,false);},coUpdateLastEdit:function(_290){var _=_290.divLastEdit;if(!_){return;}if(_290.lastEdit!=null){var __=_290.lastEdit;_.childNodes[1].firstChild.nodeValue=__[2];_.childNodes[1].href="/?user="+__[2];var _293=new Date(__[0]);var _294=(g_serverTime-_293)/1000;if(_.childNodes[3].firstChild){de(_.childNodes[3].firstChild);}Listview.funcBox.coFormatDate(_.childNodes[3],_294,_293);var _295="";if(_290.rating!=null){_295+=" (Patch "+g_getPatchVersion(_293)+")";}if(__[1]>1){_295+=" -- edited "+__[1]+" times";}_.childNodes[4].nodeValue=_295;_.style.display="";}else{_.style.display="none";}},coFormatDate:function(sp,_297,_298,time){var el;if(_297<2592000){el=ct(g_formatTimeElapsed(_297)+" ago");var _=_298;_.setTime(_.getTime()+(g_localTime-g_serverTime));sp.style.cursor="help";sp.title=_.toLocaleString();}else{el=ct("on "+g_formatDateSimple(_298,time));sp.style.cursor=sp.title="";}ae(sp,el);},ssCellOver:function(){this.className="screenshot-caption-over";},ssCellOut:function(){this.className="screenshot-caption";},moneyHonorOver:function(_29c){Tooltip.showAtCursor(_29c,"<b>Honor Points</b>",0,0,"q");},moneyArenaOver:function(_29d){Tooltip.showAtCursor(_29d,"<b>Arena Points</b>",0,0,"q");},appendMoney:function(d,_29f,zero,_2a1,_2a2,_2a3){var _,ns=0;if(_29f>=10000){ns=1;_=ce("span");_.className="moneygold";ae(_,ct(Math.floor(_29f/10000)));ae(d,_);_29f%=10000;}if(_29f>=100){if(ns){ae(d,ct(" "));}else{ns=1;}_=ce("span");_.className="moneysilver";ae(_,ct(Math.floor(_29f/100)));ae(d,_);_29f%=100;}if(_29f>=1||zero!=null){if(ns){ae(d,ct(" "));}else{ns=1;}_=ce("span");_.className="moneycopper";ae(_,ct(_29f));ae(d,_);}if(_2a1!=null&&_2a1!=0){if(ns){ae(d,ct(" "));}else{ns=1;}_=ce("span");_.className="money"+(_2a1<0?"horde":"alliance")+" tip";_.onmouseover=Listview.funcBox.moneyHonorOver;_.onmousemove=Tooltip.cursorUpdate;_.onmouseout=Tooltip.hide;ae(_,ct(number_format(Math.abs(_2a1))));ae(d,_);}if(_2a2>=1){if(ns){ae(d,ct(" "));}else{ns=1;}_=ce("span");_.className="moneyarena tip";_.onmouseover=Listview.funcBox.moneyArenaOver;_.onmousemove=Tooltip.cursorUpdate;_.onmouseout=Tooltip.hide;ae(_,ct(number_format(_2a2)));ae(d,_);}if(_2a3!=null){for(var i=0;i<_2a3.length;++i){if(ns){ae(d,ct(" "));}else{ns=1;}var _2a6=_2a3[i][0];var _2a7=_2a3[i][1];_=ce("a");_.href="?i="+_2a6;_.className="moneyitem";_.style.backgroundImage="url(http://static.wowhead.com/images/icons/tiny/"+g_items.getIcon(_2a6).toLowerCase()+".gif)";ae(_,ct(_2a7));ae(d,_);}}}};Listview.templates={faction:{sort:[1],nItemsPerPage:-1,columns:[{id:"name",name:LANG.name,align:"left",value:"name",compute:function(_2a8,td){var a=ce("a");a.style.fontFamily="Verdana, sans-serif";a.href=this.template.getItemLink(_2a8);ae(a,ct(_2a8.name));if(_2a8.expansion==1){var sp=ce("span");sp.className="bc-icon";ae(sp,a);ae(td,sp);}else{ae(td,a);}}},{id:"group",name:LANG.group,value:"group",compute:function(_2ac,td){if(_2ac.group!=null){return _2ac.group;}}},{id:"side",name:LANG.side,width:"10%",compute:function(_2ae,td){if(_2ae.side){var sp=ce("span");sp.className=(_2ae.side==1?"alliance-icon":"horde-icon");ae(sp,ct(g_sides[_2ae.side]));ae(td,sp);}},sortFunc:function(a,b,col){return strcmp(g_sides[a.side],g_sides[b.side]);}}],getItemLink:function(_2b4){return "/?faction="+_2b4.id;}},item:{sort:[1],columns:[{id:"name",name:LANG.name,align:"left",span:2,value:"name",compute:function(item,td,tr){var i=ce("td");i.style.width="1px";i.style.padding="0";i.style.borderRight="none";var num=null,qty=null;if(item.stack!=null){num=Listview.funcBox.createTextRange(item.stack[0],item.stack[1]);}if(item.avail!=null){qty=item.avail;}ae(i,g_items.createIcon(item.id,1,num,qty));ae(tr,i);td.style.borderLeft="none";var a=ce("a");a.className="q"+(6-parseInt(item.name.charAt(0)));a.style.fontFamily="Verdana, sans-serif";a.href=this.template.getItemLink(item);ae(a,ct(item.name.substring(1)));ae(td,a);}},{id:"level",name:LANG.level,width:"10%",value:"level",compute:function(item,td){if(item.reqlevel>1){var sm=ce("div");sm.className="q0 small";ae(sm,ct("Req. "+item.reqlevel));ae(td,sm);}return item.level;}},{id:"dps",name:LANG.dps,width:"10%",value:"dps",compute:function(item,td){return (item.dps||0).toFixed(1);},hidden:true},{id:"speed",name:LANG.speed,width:"10%",value:"speed",compute:function(item,td){return (item.speed||0).toFixed(2);},hidden:true},{id:"armor",name:LANG.armor,width:"10%",value:"armor",compute:function(item,td){if(item.armor>0){return item.armor;}},hidden:true},{id:"slot",name:LANG.slot,width:"10%",compute:function(item,td){return g_item_slots[item.slot];},sortFunc:function(a,b,col){return strcmp(g_item_slots[a.slot],g_item_slots[b.slot]);},hidden:true},{id:"slots",name:LANG.slots,width:"10%",value:"nslots",hidden:true},{id:"skill",name:LANG.skill,width:"10%",value:"skill",hidden:true},{id:"source",name:LANG.source,width:"12%",compute:function(item,td){if(item.source!=null){for(var i=0,len=item.source.length;i<len;++i){if(i>0){ae(td,ct(", "));}ae(td,ct(g_sources[item.source[i]]));}}},sortFunc:function(a,b,col){return Listview.funcBox.assocArrCmp(a.source,b.source,g_sources);}},{id:"type",name:LANG.type,width:"14%",compute:function(item,td){td.className="small q1";var a=ce("a");var href="?items="+item.classs;if(g_item_subclasses[item.classs]!=null){href+="."+item.subclass;}if(item.subsubclass!=null&&g_item_subsubclasses[item.classs][item.subclass]!=null){href+="."+item.subsubclass;}a.href=href;ae(a,ct(Listview.funcBox.getItemType(item.classs,item.subclass,item.subsubclass)));ae(td,a);},sortFunc:function(a,b,col){var _=Listview.funcBox.getItemType;return strcmp(_(a.classs,a.subclass,a.subsubclass),_(b.classs,b.subclass,b.subsubclass));}}],getItemLink:function(item){return "?i="+item.id;}},itemset:{sort:[1],nItemsPerPage:75,columns:[{id:"name",name:LANG.name,align:"left",value:"name",compute:function(_2d8,td){var a=ce("a");a.className="q"+(6-parseInt(_2d8.name.charAt(0)));a.style.fontFamily="Verdana, sans-serif";a.href=this.template.getItemLink(_2d8);ae(a,ct(_2d8.name.substring(1)));ae(td,a);if(_2d8.note){var d=ce("div");d.className="small";ae(d,ct(g_itemset_notes[_2d8.note]));ae(td,d);}}},{id:"level",name:LANG.level,compute:function(_2dc,td){if(_2dc.minlevel>0&&_2dc.maxlevel>0){if(_2dc.minlevel!=_2dc.maxlevel){return _2dc.minlevel+" - "+_2dc.maxlevel;}else{return _2dc.minlevel;}}else{return -1;}},sortFunc:function(a,b,col){if(col>0){return strcmp(a.minlevel,b.minlevel)||strcmp(a.maxlevel,b.maxlevel);}else{return strcmp(a.maxlevel,b.maxlevel)||strcmp(a.minlevel,b.minlevel);}}},{id:"pieces",name:LANG.pieces,compute:function(_2e1,td){td.style.padding="0";Listview.funcBox.createCenteredIcons(_2e1.pieces,td);},sortFunc:function(a,b){var lena=(a.pieces!=null?a.pieces.length:0);var lenb=(b.pieces!=null?b.pieces.length:0);return strcmp(lena,lenb);}},{id:"type",name:LANG.type,compute:function(_2e7,td){return g_itemset_types[_2e7.type];},sortFunc:function(a,b,col){return strcmp(g_itemset_types[a.type],g_itemset_types[b.type]);}},{id:"classes",name:LANG.classes,compute:function(_2ec,td){if(_2ec.classes!=null){for(var i=0,len=_2ec.classes.length;i<len;++i){if(i>0){ae(td,ct(", "));}ae(td,ct(g_chr_classes[_2ec.classes[i]]));}}},sortFunc:function(a,b,col){return Listview.funcBox.assocArrCmp(a.classes,b.classes,g_chr_classes);}}],getItemLink:function(_2f2){return "?itemset="+_2f2.id;}},npc:{sort:[1],nItemsPerPage:100,columns:[{id:"name",name:LANG.name,align:"left",value:"name",compute:function(npc,td){var a=ce("a");a.style.fontFamily="Verdana, sans-serif";a.href=this.template.getItemLink(npc);ae(a,ct(npc.name));ae(td,a);if(npc.tag!=null){var d=ce("div");d.className="small";ae(d,ct("<"+npc.tag+">"));ae(td,d);}}},{id:"level",name:LANG.level,width:"10%",compute:function(npc,td){if(npc.classification){var d=ce("div");d.className="small";ae(d,ct(g_npc_classifications[npc.classification]));ae(td,d);}if(npc.classification==3){return "??";}if(npc.minlevel>0&&npc.maxlevel>0){if(npc.minlevel!=npc.maxlevel){return npc.minlevel+" - "+npc.maxlevel;}else{return npc.minlevel;}}return -1;},sortFunc:function(a,b,col){if(col>0){return strcmp(a.minlevel,b.minlevel)||strcmp(a.maxlevel,b.maxlevel)||strcmp(a.classification,b.classification);}else{return strcmp(a.maxlevel,b.maxlevel)||strcmp(a.minlevel,b.minlevel)||strcmp(a.classification,b.classification);}}},{id:"location",name:LANG.location,compute:function(npc,td){return Listview.funcBox.location(npc,td);},sortFunc:function(a,b,col){return Listview.funcBox.assocArrCmp(a.location,b.location,g_zones);}},{id:"react",name:LANG.react,width:"10%",value:"react",compute:function(npc,td){if(npc.react==null){return -1;}var _304=["A","H"];var s="";var c=0;for(var k=0;k<2;++k){if(npc.react[k]!=null){if(c++>0){ae(td,ct(" "));}var sp=ce("span");sp.className=(npc.react[k]<0?"q7":(npc.react[k]>0?"q2":"q"));ae(sp,ct(_304[k]));ae(td,sp);}}}},{id:"petfamily",name:LANG.petfamily,width:"12%",compute:function(npc,td){td.className="q1";var a=ce("a");a.href="/?spells=-3."+npc.family;ae(a,ct(g_spell_skills[npc.family]));ae(td,a);},sortFunc:function(a,b,col){return strcmp(g_spell_skills[a.family],g_spell_skills[b.family]);},hidden:1},{id:"type",name:LANG.type,width:"12%",compute:function(npc,td){td.className="small q1";var a=ce("a");a.href="/?npcs="+npc.type;ae(a,ct(g_npc_types[npc.type]));ae(td,a);},sortFunc:function(a,b,col){return strcmp(g_npc_types[a.type],g_npc_types[b.type]);}}],getItemLink:function(npc){return "/?npc="+npc.id;}},object:{sort:[1],nItemsPerPage:100,columns:[{id:"name",name:LANG.name,align:"left",value:"name",compute:function(_316,td){var a=ce("a");a.style.fontFamily="Verdana, sans-serif";a.href=this.template.getItemLink(_316);ae(a,ct(_316.name));ae(td,a);}},{id:"location",name:LANG.location,compute:function(_319,td){return Listview.funcBox.location(_319,td);},sortFunc:function(a,b,col){return Listview.funcBox.assocArrCmp(a.location,b.location,g_zones);}},{id:"skill",name:LANG.skill,width:"10%",value:"skill",hidden:true},{id:"type",name:LANG.type,width:"12%",compute:function(_31e,td){td.className="small q1";var a=ce("a");a.href="/?objects="+_31e.type;ae(a,ct(g_object_types[_31e.type]));ae(td,a);},sortFunc:function(a,b,col){return strcmp(g_object_types[a.type],g_object_types[b.type]);}}],getItemLink:function(_324){return "/?object="+_324.id;}},quest:{sort:[1,2],nItemsPerPage:100,columns:[{id:"name",name:LANG.name,align:"left",value:"name",compute:function(_325,td){var a=ce("a");a.style.fontFamily="Verdana, sans-serif";a.href=this.template.getItemLink(_325);ae(a,ct(_325.name));ae(td,a);}},{id:"level",name:LANG.level,width:"10%",compute:function(_328,td){if(_328.type||_328.daily){var d=ce("div");d.className="small";if(_328.daily){ae(d,ct("Daily "));}if(_328.type){ae(d,ct(g_quest_types[_328.type]));}ae(td,d);}return _328.level;},sortFunc:function(a,b,col){return strcmp(a.level,b.level)||strcmp(a.type,b.type);}},{id:"side",name:LANG.side,width:"10%",compute:function(_32e,td){if(_32e.side){var sp=ce("span");if(_32e.side==1){sp.className="alliance-icon";}else{if(_32e.side==2){sp.className="horde-icon";}}ae(sp,ct(g_sides[_32e.side]));ae(td,sp);}else{return -1;}},sortFunc:function(a,b,col){return strcmp(g_sides[a.side],g_sides[b.side]);}},{id:"rewards",name:LANG.rewards,width:"25%",compute:function(_334,td){var _336=(_334.itemchoices!=null||_334.itemrewards!=null);if(_336){td.style.padding="0";var _337,rewardText;if(_334.itemchoices&&_334.itemchoices.length>1){_337="Pick one:";if(_334.itemrewards&&_334.itemrewards.length>0){rewardText="Also get:";}}Listview.funcBox.createCenteredIcons(_334.itemchoices,td,_337);Listview.funcBox.createCenteredIcons(_334.itemrewards,td,rewardText);}if(_334.xp>0||_334.money>0){var d=ce("div");if(_336){d.style.padding="4px";}if(_334.xp>0){ae(d,ct(_334.xp+" XP"+(_334.money>0?" + ":"")));}if(_334.money>0){Listview.funcBox.appendMoney(d,_334.money);}ae(td,d);}},sortFunc:function(a,b,col){var lena=(a.itemchoices!=null?a.itemchoices.length:0)+(a.itemrewards!=null?a.itemrewards.length:0);var lenb=(b.itemchoices!=null?b.itemchoices.length:0)+(b.itemrewards!=null?b.itemrewards.length:0);return strcmp(lena,lenb)||strcmp((a.xp|0)+(a.money|0),(b.xp|0)+(b.money|0));}},{id:"reputation",name:LANG.reputation,width:"14%",value:"id",hidden:true},{id:"category",name:LANG.category,width:"16%",compute:function(_33e,td){if(_33e.category!=0){td.className="small q1";var a=ce("a");a.href="/?quests="+_33e.category2+"."+_33e.category;ae(a,ct(Listview.funcBox.getQuestCategory(_33e.category)));ae(td,a);}},sortFunc:function(a,b,col){var _=Listview.funcBox.getQuestCategory;return strcmp(_(a.category),_(b.category));}}],getItemLink:function(_345){return "/?quest="+_345.id;}},spell:{sort:[1,2],columns:[{id:"name",name:LANG.name,align:"left",span:2,value:"name",compute:function(_346,td,tr){var i=ce("td"),_;i.style.width="44px";i.style.padding="0";i.style.borderRight="none";if(_346.creates!=null){_=g_items.createIcon(_346.creates[0],1,Listview.funcBox.createTextRange(_346.creates[1],_346.creates[2]));}else{_=g_spells.createIcon(_346.id,1);}_.style.cssFloat=_.style.styleFloat="left";ae(i,_);ae(tr,i);td.style.borderLeft="none";var _34a=ce("div");var a=ce("a");var c=_346.name.charAt(0);if(c!="@"){a.className="q"+(6-parseInt(c));}a.style.fontFamily="Verdana, sans-serif";a.href=this.template.getItemLink(_346);ae(a,ct(_346.name.substring(1)));ae(_34a,a);var _34d=_346.talent!=null&&this._noTalents==null;if(_346.rank!=null||_34d){var d=ce("div");d.className="small2";var txt="";if(_346.rank!=null){txt+=_346.rank;if(_34d){txt+=" ";}}if(_34d){txt+="(Talent)";}ae(d,ct(txt));ae(_34a,d);}if(_346.races!=null){_34a.style.position="relative";var d=ce("div");d.className="small";d.style.fontStyle="italic";d.style.position="absolute";d.style.right=d.style.bottom="3px";var foo=_346.races.toString();if(foo=="1,3,4,7,11"){ae(d,ct(g_sides[1]));}else{if(foo=="2,5,6,8,10"){ae(d,ct(g_sides[2]));}else{for(var i=0,len=_346.races.length;i<len;++i){if(i>0){ae(d,ct(", "));}ae(d,ct(g_chr_races[_346.races[i]]));}}}ae(_34a,d);}ae(td,_34a);}},{id:"level",name:LANG.level,width:"10%",value:"level",compute:function(_353,td){if(_353.level>0){return _353.level;}},hidden:true},{id:"school",name:LANG.school,width:"10%",hidden:true,compute:function(_355,td){return g_spell_resistances[_355.school];},sortFunc:function(a,b,col){return strcmp(g_spell_resistances[a.school],g_spell_resistances[b.school]);}},{id:"reagents",name:LANG.reagents,align:"left",compute:function(_35a,td){var _35c=(_35a.reagents!=null);if(_35c){td.style.padding="0";var d=ce("div");var _35e=_35a.reagents;d.style.width=(44*_35e.length)+"px";for(var i=0,len=_35e.length;i<len;++i){var id=_35e[i][0];var num=_35e[i][1];var icon=g_items.createIcon(id,1,num);icon.style.cssFloat=icon.style.styleFloat="left";ae(d,icon);}ae(td,d);}},sortFunc:function(a,b){var lena=(a.reagents!=null?a.reagents.length:0);var lenb=(b.reagents!=null?b.reagents.length:0);return strcmp(lena,lenb);}},{id:"tp",name:LANG.tp,width:"7%",hidden:true,value:"tp",compute:function(_367,td){if(_367.tp>0){return _367.tp;}}},{id:"source",name:LANG.source,width:"12%",hidden:true,compute:function(_369,td){if(_369.source!=null){for(var i=0,len=_369.source.length;i<len;++i){if(i>0){ae(td,ct(", "));}ae(td,ct(g_sources[_369.source[i]]));}}},sortFunc:function(a,b,col){return Listview.funcBox.assocArrCmp(a.source,b.source,g_sources);}},{id:"skill",name:LANG.skill,width:"16%",compute:function(_36f,td){if(_36f.skill!=null){var div=ce("div");div.className="small";for(var i=0,len=_36f.skill.length;i<len;++i){if(i>0){ae(div,ct(", "));}if(_36f.skill[i]==-1){ae(div,ct("..."));}else{if(in_array([7,-2,-3,11,9],_36f.cat)!=-1){var a=ce("a");a.className="q1";a.href="/?spells="+_36f.cat+"."+(_36f.chrclass?_36f.chrclass+".":"")+_36f.skill[i];ae(a,ct(g_spell_skills[_36f.skill[i]]));ae(div,a);}else{ae(div,ct(g_spell_skills[_36f.skill[i]]));}}}if(_36f.learnedat>0){ae(div,ct(" ("));var _374=ce("span");if(_36f.learnedat==9999){_374.className="q0";ae(_374,ct("??"));}else{if(_36f.learnedat>0){ae(_374,ct(_36f.learnedat));_374.style.fontWeight="bold";}}ae(div,_374);ae(div,ct(")"));}ae(td,div);if(_36f.colors!=null){var _375=_36f.colors,nColors=0;for(var i=0;i<_375.length;++i){if(_375[i]>0){++nColors;break;}}if(nColors>0){nColors=0;div=ce("div");div.className="small";div.style.fontWeight="bold";for(var i=0;i<_375.length;++i){if(_375[i]>0){if(nColors++>0){ae(div,ct(" "));}var _378=ce("span");_378.className="r"+(i+1);ae(_378,ct(_375[i]));ae(div,_378);}}ae(td,div);}}}},sortFunc:function(a,b){var foo=strcmp(a.learnedat,b.learnedat);if(foo!=0){return foo;}if(a.colors!=null&&b.colors!=null){for(var i=0;i<4;++i){foo=strcmp(a.colors[i],b.colors[i]);if(foo!=0){return foo;}}}return Listview.funcBox.assocArrCmp(a.skill,b.skill,g_spell_skills);}}],getItemLink:function(_37d){return "/?spell="+_37d.id;}},zone:{sort:[1],nItemsPerPage:-1,columns:[{id:"name",name:LANG.name,align:"left",value:"name",compute:function(zone,td){var a=ce("a");a.style.fontFamily="Verdana, sans-serif";a.href=this.template.getItemLink(zone);ae(a,ct(zone.name));if(zone.expansion==1){var sp=ce("span");sp.className="bc-icon";ae(sp,a);ae(td,sp);}else{ae(td,a);}}},{id:"level",name:LANG.level,width:"10%",compute:function(zone,td){if(zone.minlevel>0&&zone.maxlevel>0){if(zone.minlevel!=zone.maxlevel){return zone.minlevel+" - "+zone.maxlevel;}else{return zone.minlevel;}}},sortFunc:function(a,b,col){if(col>0){return strcmp(a.minlevel,b.minlevel)||strcmp(a.maxlevel,b.maxlevel);}else{return strcmp(a.maxlevel,b.maxlevel)||strcmp(a.minlevel,b.minlevel);}}},{id:"territory",name:LANG.territory,width:"13%",compute:function(zone,td){var sp=ce("span");switch(zone.territory){case 0:sp.className="alliance-icon";break;case 1:sp.className="horde-icon";break;case 4:sp.className="ffapvp-icon";break;}ae(sp,ct(g_zone_territories[zone.territory]));ae(td,sp);},sortFunc:function(a,b,col){return strcmp(g_zone_territories[a.territory],g_zone_territories[b.territory]);}},{id:"instancetype",name:LANG.instancetype,compute:function(zone,td){if(zone.instance>0){var sp=ce("span");if(zone.instance>=1&&zone.instance<=5){sp.className="instance-icon"+zone.instance;}var buff=g_zone_instancetypes[zone.instance];if(zone.nplayers>0&&((zone.instance!=2&&zone.instance!=5)||zone.nplayers>5)){buff+=" (";if(zone.instance==4){buff+=zone.nplayers+"v"+zone.nplayers;}else{buff+=zone.nplayers+"-man";}buff+=")";}ae(sp,ct(buff));ae(td,sp);}},sortFunc:function(a,b,col){return strcmp(g_zone_instancetypes[a.instance],g_zone_instancetypes[b.instance])||strcmp(a.instance,b.instance)||strcmp(a.nplayers,b.nplayers);}},{id:"category",name:LANG.category,width:"15%",compute:function(zone,td){td.className="small q1";var a=ce("a");a.href="/?zones="+zone.category;ae(a,ct(g_zone_categories[zone.category]));ae(td,a);},sortFunc:function(a,b,col){return strcmp(g_zone_categories[a.category],g_zone_categories[b.category]);}}],getItemLink:function(zone){return "/?zone="+zone.id;}},comment:{sort:[1],mode:2,nItemsPerPage:40,poundable:2,columns:[{value:"number"},{value:"id"},{value:"rating"}],compute:function(_39b,div){var _,postedOn=new Date(_39b.date),elapsed=(g_serverTime-postedOn)/1000,godMode=(g_user.roles&26)!=0,collapsed=_39b.rating<0||_39b.purged||_39b.deleted,editable=godMode||_39b.user.toLowerCase()==g_user.name.toLowerCase(),deletable=editable&&_39b.deleted==0,ratable=_39b.purged==0&&_39b.deleted==0&&g_user.id&&_39b.user.toLowerCase()!=g_user.name.toLowerCase()&&in_array(_39b.raters,g_user.id,function(x){return x[0];})==-1,ratableShown=_39b.rating>=0&&(g_user.id==0||ratable);_39b.ratable=ratable;div.className="comment";if(_39b.indent){div.className+=" comment-indent";}var _39f=ce("div");var _3a0=ce("div");var _3a1=ce("div");_39b.divHeader=_39f;_39b.divBody=_3a0;_39b.divLinks=_3a1;_39f.className=(collapsed?"comment-header-bt":"comment-header");var _3a2=ce("div");_3a2.className="comment-rating";if(collapsed){var _3a3=ce("a");_3a3.href="javascript:;";_3a3.onclick=Listview.funcBox.coToggleVis.bind(_3a3,_39b);_3a3.onmousedown=rf;ae(_3a3,ct("Show comment"));ae(_3a2,_3a3);ae(_3a2,ct(" "+String.fromCharCode(160)+" "));}var _3a4=ce("b");ae(_3a4,ct("Rating: "));var _3a5=ce("span");ae(_3a5,ct((_39b.rating>0?"+":"")+_39b.rating));ae(_3a4,_3a5);ae(_3a2,_3a4);ae(_3a2,ct(" "));var _3a6=ce("span");var _3a7=ce("a"),aMinus=ce("a");if(ratable){_3a7.href=aMinus.href="javascript:;";_3a7.onclick=Listview.funcBox.coRate.bind(_3a7,_39b,1);aMinus.onclick=Listview.funcBox.coRate.bind(aMinus,_39b,-1);_3a7.onmousedown=aMinus.onmousedown=rf;if(godMode){var _3a8=ce("a");_3a8.href="javascript:;";_3a8.onclick=Listview.funcBox.coRate.bind(_3a8,_39b,0);_3a8.onmousedown=rf;_3a8.onmouseover=Listview.funcBox.coCustomRatingOver;_3a8.onmousemove=Tooltip.cursorUpdate;_3a8.onmouseout=Tooltip.hide;ae(_3a8,ct("[~]"));ae(_3a6,_3a8);ae(_3a6,ct(" "));}}else{_3a7.href=aMinus.href="/?account=signin";}ae(_3a7,ct("[+]"));_3a7.onmouseover=Listview.funcBox.coPlusRatingOver;aMinus.onmouseover=Listview.funcBox.coMinusRatingOver;_3a7.onmousemove=aMinus.onmousemove=Tooltip.cursorUpdate;_3a7.onmouseout=aMinus.onmouseout=Tooltip.hide;ae(aMinus,ct("[-]"));ae(_3a6,aMinus);ae(_3a6,ct(" "));ae(_3a6,_3a7);ae(_3a2,_3a6);if(!ratableShown){_3a6.style.display="none";}ae(_39f,_3a2);ae(_39f,ct("By "));var _3a9=ce("a");_3a9.href="/?user="+_39b.user;ae(_3a9,ct(_39b.user));ae(_39f,_3a9);ae(_39f,ct(" "));var _3aa=ce("a");_3aa.className="q0";_3aa.href="#comments:id="+_39b.id;Listview.funcBox.coFormatDate(_3aa,elapsed,postedOn);_3aa.style.cursor="pointer";ae(_39f,_3aa);ae(_39f,ct(" (Patch "+g_getPatchVersion(postedOn)+")"));ae(div,_39f);_3a0.className="comment-body"+Listview.funcBox.coGetColor(_39b);if(_39b.indent){_3a0.className+=" comment-body-indent";}_3a0.innerHTML=Markup.toHtml(_39b.body,{mode:Markup.MODE_COMMENT});ae(div,_3a0);if(_39b.roles==0||g_user.roles>0){var _3ab=ce("div");_39b.divLastEdit=_3ab;_3ab.className="comment-lastedit";ae(_3ab,ct("Last edited by "));var _3ac=ce("a");ae(_3ac,ct(" "));ae(_3ab,_3ac);ae(_3ab,ct(" "));var _3ad=ce("span");ae(_3ab,_3ad);ae(_3ab,ct(" "));Listview.funcBox.coUpdateLastEdit(_39b);if(collapsed){_3ab.style.display="none";}ae(div,_3ab);}_3a1.className="comment-links";if(editable){var _3ae=ce("span");var _3af=ce("a");ae(_3af,ct("Edit"));_3af.onclick=Listview.funcBox.coEdit.bind(this,_39b,0);ns(_3af);_3af.href="javascript:;";ae(_3ae,_3af);ae(_3ae,ct("|"));ae(_3a1,_3ae);}if(deletable){var _3b0=ce("span");var _3b1=ce("a");ae(_3b1,ct("Delete"));_3b1.onclick=Listview.funcBox.coDelete.bind(this,_39b);ns(_3b1);_3b1.href="javascript:;";ae(_3b0,_3b1);ae(_3b0,ct("|"));ae(_3a1,_3b0);}var _3b2=ce("a");ae(_3b2,ct("Reply"));if(g_user.id>0){_3b2.onclick=Listview.funcBox.coReply.bind(this,_39b);_3b2.onmousedown=rf;_3b2.href="javascript:;";}else{_3b2.href="/?account=signin";}ae(_3a1,_3b2);if(collapsed){_3a0.style.display="none";_3a1.style.display="none";}ae(div,_3a1);},createNote:function(div){var sm=ce("small");var a=ce("a");if(g_user.id>0){a.href="javascript:;";a.onmousedown=rf;a.onclick=co_addYourComment;}else{a.href="/?account=signin";}ae(a,ct("Add your comment"));ae(sm,a);var sp=ce("span");sp.style.padding="0 5px";sp.style.color="white";ae(sp,ct("|"));ae(sm,sp);ae(sm,ct("Sort comments by: "));var _3b7=ce("a");_3b7.href="javascript:;";ae(_3b7,ct("Date"));_3b7.onmousedown=rf;_3b7.onclick=Listview.funcBox.coSortDate.bind(this,_3b7);ae(sm,_3b7);ae(sm,ct(", "));var _3b8=ce("a");_3b8.href="javascript:;";ae(_3b8,ct("Highest rated first"));_3b8.onmousedown=rf;_3b8.onclick=Listview.funcBox.coSortHighestRatedFirst.bind(this,_3b8);ae(sm,_3b8);_3b7.onclick();ae(div,sm);},onNoData:function(div){if(typeof g_pageInfo=="object"&&g_pageInfo.type>0){var s="<b>No comments have been posted yet.</b><br /><br />";if(g_user.id>0){s+="Be the first to <a href=\"javascript:;\" onclick=\"co_addYourComment()\" onmousedown=\"return false\">add a comment</a> to this page!";}else{s+="Please <a href=\"/?account=signin\">sign in</a> to add your comment, or <a href=\"/?account=signup\">sign up</a> if you don't already have an account.";}div.style.padding="1.5em 0";div.innerHTML=s;}},onBeforeCreate:function(){if(location.hash.match(/comments:id=([0-9]+)/)!=null){var _3bb=in_array(this.data,parseInt(RegExp.$1),function(x){return x.id;});this.rowOffset=this.getRowOffset(_3bb);return this.data[_3bb];}},onAfterCreate:function(_3bd){if(_3bd!=null){var div=_3bd.__div;this.tabs.__st=div;div.firstChild.style.border="1px solid #505050";}}},commentpreview:{sort:[3],nItemsPerPage:75,columns:[{id:"subject",name:LANG.subject,align:"left",value:"subject",compute:function(_3bf,td){var a=ce("a");a.style.fontFamily="Verdana, sans-serif";a.href=this.template.getItemLink(_3bf);ae(a,ct(_3bf.subject));ae(td,a);var d=ce("div");d.className="small";ae(d,ct(LANG.types[_3bf.type][0]));ae(td,d);}},{id:"preview",name:LANG.preview,align:"left",width:"50%",value:"preview",compute:function(_3c3,td){var d=ce("div");d.className="crop";if(_3c3.rating>=10){d.className+=" comment-green";}ae(d,ct(Markup.removeTags(_3c3.preview,{mode:(_3c3.rating!=null?Markup.MODE_COMMENT:Markup.MODE_ARTICLE)})));ae(td,d);var _3c6=_3c3.rating!=null;var _3c7=_3c3.user!=null;if(_3c6||_3c7){d=ce("div");d.className="small3";if(_3c7){ae(d,ct("By "));var a=ce("a");a.href="/?user="+_3c3.user;ae(a,ct(_3c3.user));ae(d,a);if(_3c6){ae(d,ct(" - "));}}if(_3c6){ae(d,ct("Rating: "+(_3c3.rating>0?"+":"")+_3c3.rating));var s=ce("span"),foo="";s.className="q7";if(_3c3.deleted){foo=" (Deleted)";}else{if(_3c3.purged){foo=" (Purged)";}}ae(s,ct(foo));ae(d,s);}ae(td,d);}}},{id:"posted",name:LANG.posted,width:"16%",value:"elapsed",compute:function(_3ca,td){var _3cc=new Date(_3ca.date),elapsed=(g_serverTime-_3cc)/1000;var s=ce("span");Listview.funcBox.coFormatDate(s,elapsed,_3cc);ae(td,s);}}],getItemLink:function(_3ce){return "/?"+g_types[_3ce.type]+"="+_3ce.typeId+(_3ce.id!=null?"#comments:id="+_3ce.id:"");}},screenshot:{sort:[],mode:3,nItemsPerPage:40,nItemsPerRow:4,poundable:2,columns:[],compute:function(_3cf,td){var _,postedOn=new Date(_3cf.date),elapsed=(g_serverTime-postedOn)/1000;td.className="screenshot-cell";td.vAlign="bottom";var a=ce("a");a.href=Listview.templates.screenshot.getItemLink(_3cf);var img=ce("img");img.src="/images/screenshots/thumb/"+_3cf.id+".jpg";img.width=_3cf.rWidth;img.height=_3cf.rHeight;ae(a,img);ae(td,a);var d=ce("div");d.className="screenshot-cell-user";if(_3cf.user!=null&&_3cf.user.length){a=ce("a");a.href="/?user="+_3cf.user;ae(a,ct(_3cf.user));ae(d,ct("From "));ae(d,a);ae(d,ct(" "));}var s=ce("span");Listview.funcBox.coFormatDate(s,elapsed,postedOn);ae(d,s);ae(td,d);d=ce("div");d.style.position="relative";d.style.height="1em";var _3d6=(_3cf.caption!=null&&_3cf.caption.length);var _3d7=(_3cf.subject!=null&&_3cf.subject.length);if(_3d6||_3d7){var d2=ce("div");d2.className="screenshot-caption";if(_3d7){var foo1=ce("small");ae(foo1,ct(LANG.types[_3cf.type][0]+": "));var foo2=ce("a");ae(foo2,ct(_3cf.subject));foo2.href="/?"+g_types[_3cf.type]+"="+_3cf.typeId;ae(foo1,foo2);ae(d2,foo1);if(_3cf.caption.length){ae(foo1,ct(" (...)"));}ae(foo1,ce("br"));}if(_3d6){aE(td,"mouseover",Listview.funcBox.ssCellOver.bind(d2));aE(td,"mouseout",Listview.funcBox.ssCellOut.bind(d2));ae(d2,ct(_3cf.caption));}ae(d,d2);}ae(td,d);},getItemLink:function(_3db){return "/?screenshot=view&"+_3db.type+"."+_3db.typeId+"#"+_3db.id;},createNote:function(div){if(typeof g_pageInfo=="object"&&g_pageInfo.type>0){var sm=ce("small");var a=ce("a");if(g_user.id>0){a.href="javascript:;";a.onclick=ss_submitAScreenshot;a.onmousedown=rf;}else{a.href="/?account=signin";}ae(a,ct("Submit a screenshot"));ae(sm,a);ae(div,sm);}},onNoData:function(div){if(typeof g_pageInfo=="object"&&g_pageInfo.type>0){var s="<b>No screenshots have been submitted yet.</b><br /><br />";if(g_user.id>0){s+="Be the first to <a href=\"javascript:;\" onclick=\"ss_submitAScreenshot()\" onmousedown=\"return false\">submit a screenshot</a> for this page!";}else{s+="Please <a href=\"/?account=signin\">sign in</a> to submit a screenshot, or <a href=\"/?account=signup\">sign up</a> if you don't already have an account.";}div.style.padding="1.5em 0";div.innerHTML=s;}else{return -1;}}}};Menu.fixUrls(mn_items,"?items=");Menu.fixUrls(mn_npcs,"/?npcs=");Menu.fixUrls(mn_objects,"/?objects=");Menu.fixUrls(mn_quests,"/?quests=");Menu.fixUrls(mn_spells,"/?spells=");Menu.fixUrls(mn_zones,"/?zones=");Menu.fixUrls(mn_talentCalc,"/?talent=");Menu.fixUrls(mn_forums,"/?forums&board=",true);var _;var g_localTime=new Date();var g_user={id:0,name:"",roles:0};var g_items=[];var g_spells=[];var g_users=[];var g_types=_=[];_[1]="npc";_[2]="object";_[3]="item";_[4]="itemset";_[5]="quest";_[6]="spell";_[7]="zone";_[8]="faction";g_items.getIcon=function(id){if(g_items[id]!=null){return g_items[id].icon;}else{return "temp";}};g_items.createIcon=function(id,size,num,qty){return Icon.create(g_items.getIcon(id),size,null,"?i="+id,num,qty);};g_spells.getIcon=function(id){if(g_spells[id]!=null){return g_spells[id].icon;}else{return "temp";}};g_spells.createIcon=function(id,size,num,qty){return Icon.create(g_spells.getIcon(id),size,null,"/?spell="+id,num,qty);};var $WowheadPower=new function(){var _3eb,currentId,currentA,cursorX,cursorY,mode=0,STATUS_NONE=0,STATUS_QUERYING=1,STATUS_ERROR=2,STATUS_NOTFOUND=3,STATUS_OK=4,TYPE_ITEM=3,TYPE_SPELL=6,CURSOR_HSPACE=15,CURSOR_VSPACE=15,LOOKUPS={3:[g_items,"item"],6:[g_spells,"spell"]};function init(){aE(document,"mouseover",onMouseOver);}function updateCursorPos(e){var pos=g_getCursorPos(e);cursorX=pos.x;cursorY=pos.y;}function scanElement(t,e){if(t.nodeName!="A"){return -2323;}if(!t.href.length){return;}var i1,i2,m;i1=2;i2=3;if(t.href.indexOf("http://")==0){m=t.href.match(/http:\/\/(www|dev)?\.?wowhead\.com\/\?(item|spell)=([0-9]+)/);}else{m=t.href.match(/()\?(item|spell)=([0-9]+)/);}if(m==null&&t.rel){i1=1;i2=2;m=t.rel.match(/(item|spell).?([0-9]+)/);}if(m){currentA=t;if(t.href.indexOf("#")!=-1&&document.location.href.indexOf(m[i1]+"="+m[i2])!=-1){return;}mode=(t.parentNode.className=="tile"?1:0);if(!t.onmouseout){if(mode==0){t.onmousemove=onMouseMove;}t.onmouseout=onMouseOut;}updateCursorPos(e);if(m[i1]=="item"){display(TYPE_ITEM,m[i2]);}else{display(TYPE_SPELL,m[i2]);}}}function onMouseOver(e){e=$E(e);var t=e._target;var i=0;while(t!=null&&i<3&&scanElement(t,e)==-2323){t=t.parentNode;++i;}}function onMouseMove(e){e=$E(e);updateCursorPos(e);Tooltip.move(cursorX,cursorY,0,0,CURSOR_HSPACE,CURSOR_VSPACE);}function onMouseOut(){_3eb=null;currentA=null;Tooltip.hide();}function initElement(type,id){var arr=LOOKUPS[type][0];if(arr[id]==null){arr[id]={};}if(arr[id].status==null){arr[id].status=STATUS_NONE;}}function display(type,id){_3eb=type;currentId=id;initElement(type,id);var arr=LOOKUPS[type][0];if(arr[id].status==STATUS_OK||arr[id].status==STATUS_NOTFOUND){showTooltip(arr[id].tooltip,arr[id].icon);}else{if(arr[id].status==STATUS_QUERYING){showTooltip(LANG.loading);}else{request(type,id);}}}function request(type,id,_3fd){var arr=LOOKUPS[type][0];if(arr[id].status!=STATUS_NONE&&arr[id].status!=STATUS_ERROR){return;}arr[id].status=STATUS_QUERYING;if(!_3fd){arr[id].timer=setTimeout(function(){showLoading.apply(this,[type,id]);},333);}g_ajaxIshRequest("http://www.wowhead.com/?"+LOOKUPS[type][1]+"="+id+"&power");}function showTooltip(html,icon){if(currentA._fixTooltip){html=currentA._fixTooltip(html,_3eb,currentId,currentA);}if(!html){html=LANG.types[_3eb][0]+" not found :(";icon="Temp";}if(mode==1){Tooltip.setIcon(null);Tooltip.show(currentA,html,0,0);}else{Tooltip.setIcon(icon);Tooltip.showAtXY(html,cursorX,cursorY,CURSOR_HSPACE,CURSOR_VSPACE);}}function showLoading(type,id){if(_3eb==type&&currentId==id){showTooltip(LANG.loading);var arr=LOOKUPS[type][0];arr[id].timer=setTimeout(function(){notFound.apply(this,[type,id]);},3850);}}function notFound(type,id){var arr=LOOKUPS[type][0];arr[id].status=STATUS_ERROR;if(_3eb==type&&currentId==id){showTooltip(LANG.noresponse);}}this.register=function(type,id,json){var arr=LOOKUPS[type][0];clearTimeout(arr[id].timer);cO(arr[id],json);if(arr[id].tooltip){arr[id].status=STATUS_OK;}else{arr[id].status=STATUS_NOTFOUND;}if(_3eb==type&&id==currentId){showTooltip(arr[id].tooltip,arr[id].icon);}};this.registerItem=function(id,json){this.register(TYPE_ITEM,id,json);};this.registerSpell=function(id,json){this.register(TYPE_SPELL,id,json);};this.request=function(type,id){initElement(type,id);request(type,id,1);};this.requestItem=function(id){this.request(TYPE_ITEM,id);};this.requestSpell=function(id){this.request(TYPE_SPELL,id);};this.getStatus=function(type,id){var arr=LOOKUPS[type][0];if(arr[id]!=null){return arr[id].status;}else{return STATUS_NONE;}};this.getItemStatus=function(id){this.getStatus(TYPE_ITEM,id);};this.requestSpell=function(id){this.getStatus(TYPE_SPELL,id);};init();};LiveSearch=new function(){var _418,lastSearch={},lastDiv,timer,prepared,container,cancelNext,hasData;function setText(_419,txt){_419.value=txt;_419.selectionStart=_419.selectionEnd=txt.length;}function colorDiv(div,_41c){if(lastDiv){lastDiv.className=lastDiv.className.replace("live-search-selected","");}lastDiv=div;lastDiv.className+=" live-search-selected";if(!_41c){show();setTimeout(setText.bind(0,_418,g_getTextContent(div.firstChild.firstChild.childNodes[1])),1);cancelNext=1;}}function aOver(){colorDiv(this.parentNode.parentNode,1);}function isVisible(){if(!container){return false;}return container.style.display!="none";}function adjust(_41d){if(_41d==1&&!isVisible()){return;}if(_418==null){return;}var c=ac(_418);container.style.left=(c[0]-2)+"px";container.style.top=(c[1]+_418.offsetHeight+1)+"px";container.style.width=_418.offsetWidth+"px";}function prepare(){if(prepared){return;}prepared=1;container=ce("div");container.className="live-search";container.style.display="none";ae(ge("layers"),container);aE(window,"resize",adjust.bind(0,1));aE(document,"click",hide);}function show(){if(container&&!isVisible()){adjust();container.style.display="";}}function hide(){if(container){container.style.display="none";}}function boldify(_41f){return "<b>"+_41f+"</b>";}function display(_420,_421,_422,_423){prepare();show();lastA=null;hasData=1;while(container.firstChild){de(container.firstChild);}if(!Browser.ie6){ae(container,ce("em"));ae(container,ce("var"));ae(container,ce("strong"));}_421=_421.replace(/[^a-z0-9'\-]/," ");_421=trim(_421.replace(/\s+/g," "));var _424=_421.split(" "),strRegex="";for(var j=0,len=_424.length;j<len;++j){if(j>0){strRegex+="|";}strRegex+=_424[j];}var _426=new RegExp("("+strRegex+")","gi");for(var i=0,len=_422.length;i<len;++i){var pos=_422[i].lastIndexOf("(");if(pos!=-1){_422[i]=_422[i].substr(0,pos-1);}var type=_423[i][0],typeId=_423[i][1],param1=_423[i][2],param2=_423[i][3],a=ce("a"),sp=ce("i"),sp2=ce("span"),div=ce("div"),div2=ce("div");a.onmouseover=aOver;a.href="http://www.wowhead.com/?"+g_types[type]+"="+typeId;if(type==3&&param2){a.className+=" q"+param2;}if((type==3||type==6)&&param1){div.className+=" live-search-icon";div.style.backgroundImage="url(http://static.wowhead.com/images/icons/small/"+param1.toLowerCase()+".jpg)";}ae(sp,ct(LANG.types[type][0]));ae(a,sp);var _42a=_422[i];_42a=_42a.replace(_426,boldify);sp2.innerHTML=_42a;ae(a,sp2);if(type==6&&param2){ae(a,ct(" ("+param2+")"));}ae(div2,a);ae(div,div2);ae(container,div);}}function receive(xhr,opt){var text=xhr.responseText;if(text.charAt(0)!="["||text.charAt(text.length-1)!="]"){return;}var a=eval(text);var _42f=a[0];if(_42f==opt.search){if(a.length==8){display(opt.textbox,_42f,a[1],a[7]);}else{hide();}}}function fetch(_430,_431){new Ajax("/?search="+urlencode(_431)+"&opensearch",{onSuccess:receive,textbox:_430,search:_431});}function preFetch(_432,_433){if(cancelNext){cancelNext=0;return;}hasData=0;if(timer>0){clearTimeout(timer);timer=0;}timer=setTimeout(fetch.bind(0,_432,_433),200);}function cycle(dir){if(!isVisible()){if(hasData){show();}return;}var _435=(container.childNodes[0].nodeName=="EM"?container.childNodes[3]:container.firstChild);var _436=dir?_435:container.lastChild;if(lastDiv==null){colorDiv(_436);}else{var div=dir?lastDiv.nextSibling:lastDiv.previousSibling;if(div){if(div.nodeName=="STRONG"){div=container.lastChild;}colorDiv(div);}else{colorDiv(_436);}}}function onKeyUp(e){e=$E(e);var _439=e._target;if(Browser.gecko&&e.ctrlKey){switch(e.keyCode){case 48:case 96:case 107:case 109:adjust(_439);break;}}var _43a=trim(_439.value.replace(/\s+/g," "));if(_43a==lastSearch[_439.id]){return;}lastSearch[_439.id]=_43a;if(_43a.length>=2){preFetch(_439,_43a);}else{hide();}}function onKeyDown(e){e=$E(e);var _43c=e._target;switch(e.keyCode){case 27:hide();break;case 38:cycle(0);break;case 40:cycle(1);break;}}function onFocus(e){e=$E(e);var _43e=e._target;if(_43e!=document){_418=_43e;}}this.attach=function(_43f){_43f.setAttribute("autocomplete","off");aE(_43f,"focus",onFocus);aE(_43f,"keyup",onKeyUp);aE(_43f,Browser.opera?"keypress":"keydown",onKeyDown);};};Lightbox=new function(){var _440,outer,inner,prepared,lastId,divs={},visible;function prepare(){if(prepared){return;}prepared=1;var dest=document.body;_440=ce("div");_440.className="lightbox-overlay";outer=ce("div");outer.className="lightbox-outer";inner=ce("div");inner.className="lightbox-inner";_440.style.display=outer.style.display="none";aE(_440,"click",hide);aE(outer,"mousewheel",function(e){e=$E(e);e.returnValue=false;});aE(document,Browser.opera?"keypress":"keydown",function(e){if(visible){e=$E(e);if(e.keyCode==27){hide();}}});aE(window,"resize",onResize);if(Browser.ie6){aE(window,"scroll",ie6Scroll);}ae(dest,_440);ae(outer,inner);ae(dest,outer);}function onResize(){if(visible){_440.style.height=document.body.offsetHeight+"px";if(Browser.ie6){ie6Scroll();}}}function ie6Scroll(){if(visible){var st=g_getScroll().y,bh=g_getWindowSize().h;outer.style.top=(st+bh/2)+"px";}}function hide(){visible=0;_440.style.display=outer.style.display="none";array_apply(gE(document,"iframe"),function(x){x.style.display="";});}this.setSize=function(w,h){inner.style.width=w+"px";inner.style.height=h+"px";inner.style.left=-parseInt(w/2)+"px";inner.style.top=-parseInt(h/2)+"px";};this.show=function(id,_449,opt){visible=1;array_apply(gE(document,"iframe"),function(x){x.style.display="none";});prepare();if(lastId!=id&&divs[lastId]!=null){divs[lastId].style.display="none";}lastId=id;var _44c=0,d;if(divs[id]==null){_44c=1;d=ce("div");ae(inner,d);divs[id]=d;}else{d=divs[id];}_449(d,_44c,opt);onResize();_440.style.display=outer.style.display=d.style.display="";};this.hide=function(){hide();};};ModelViewer=new function(){var type,typeId,displayId,flashDiv,javaDiv,mode;function render(){if(mode){flashDiv.style.display="none";if(javaDiv.childNodes.length==0){javaDiv.innerHTML="<applet code=\"org.jdesktop.applet.util.JNLPAppletLauncher\" width=\"600\" height=\"400\" archive=\"http://www.wowhead.com/modelviewer2/applet-launcher.jar,http://download.java.net/media/jogl/builds/archive/jsr-231-webstart-current/jogl.jar,http://download.java.net/media/gluegen/webstart/gluegen-rt.jar,http://download.java.net/media/java3d/webstart/release/vecmath/latest/vecmath.jar,http://www.wowhead.com/modelviewer2/ModelView2.jar\"><param name=\"codebase_lookup\" value=\"false\"><param name=\"subapplet.classname\" value=\"modelview.ModelViewerApplet\"><param name=\"subapplet.displayname\" value=\"Model Viewer Applet\"><param name=\"progressbar\" value=\"true\"><param name=\"jnlpNumExtensions\" value=\"1\"><param name=\"jnlpExtension1\" value=\"http://download.java.net/media/jogl/builds/archive/jsr-231-webstart-current/jogl.jnlp\"><param name=\"contentPath\" value=\"http://www.wowhead.com/modelviewer2/\"><param name=\"model\" value=\""+g_types[type]+"/"+displayId+"\"><param name=\"bgColor\" value=\"#181818\"></applet>";}javaDiv.style.display="";}else{javaDiv.style.display="none";if(flashDiv.childNodes.length==0){var fo=new SWFObject("http://www.wowhead.com/modelviewer2/viewer2R1.swf","tgkejfh464","600","400",7,"#181818");fo.addParam("quality","low");fo.addParam("FlashVars","model=http://www.wowhead.com/modelviewer2/models/"+g_types[type]+"/"+displayId+".dae&link=http://www.wowhead.com/?"+g_types[type]+"="+typeId+"&logo=wowhead");if(!fo.write("dsjkgbdsg2346")){ge("dsjkgbdsg2346").innerHTML="<br /><br /><br /><br /><br /><br /><br /><br />You have an old version of Adobe's Flash Player. Get the latest <a href=\"http://www.macromedia.com/go/getflashplayer/\" target=\"_blank\">Flash player</a>.";}}flashDiv.style.display="";}}function onLinkClick(m){g_setSelectedLink(this,"modelviewer-mode");if(mode==null){mode=m;setTimeout(render,100);}else{mode=m;sc("modelviewer-mode",7,m);render();}}function onShow(dest,_451,opt){Lightbox.setSize(620,452);if(_451){dest.className="modelviewer";var _453=ce("div");flashDiv=ce("div");javaDiv=ce("div");flashDiv.id="dsjkgbdsg2346";javaDiv.id="dsjkgbdsg2347";_453.className="modelviewer-screen";flashDiv.style.display=javaDiv.style.display="none";ae(_453,flashDiv);ae(_453,javaDiv);ae(dest,_453);var a1=ce("a"),a2=ce("a");a1.className="modelviewer-help";a1.href="/?help=modelviewer";a1.target="_blank";ae(a1,ce("span"));a2.className="modelviewer-close";a2.href="javascript:;";a2.onclick=Lightbox.hide;ae(a2,ce("span"));ae(dest,a2);ae(dest,a1);var d=ce("div"),sp=ce("span"),a1=ce("a"),a2=ce("a");d.className="modelviewer-quality";a1.href=a2.href="javascript:;";ae(a1,ct("Low"));ae(a2,ct("High"));a1.onclick=onLinkClick.bind(a1,0);a2.onclick=onLinkClick.bind(a2,1);if(gc("modelviewer-mode")=="1"){a2.onclick();}else{a1.onclick();}ae(sp,a1);ae(sp,ct(" "+String.fromCharCode(160)));ae(sp,a2);ae(d,ce("div"));ae(d,sp);ae(dest,d);d=ce("div");d.className="clear";ae(dest,d);}}this.show=function(t,tI,dI){type=t;typeId=tI;displayId=dI;Lightbox.show("modelviewer",onShow);};};
